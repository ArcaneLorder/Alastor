<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>migration_guide</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#openssl_3_0">OPENSSL 3.0</a></li>
	<ul>

		<li><a href="#main_changes_from_openssl_1_1_1">Main Changes from OpenSSL 1.1.1</a></li>
		<ul>

			<li><a href="#major_release">Major Release</a></li>
			<li><a href="#license_change">License Change</a></li>
			<li><a href="#providers_and_fips_support">Providers and FIPS support</a></li>
			<li><a href="#low_level_apis">Low Level APIs</a></li>
			<li><a href="#legacy_algorithms">Legacy Algorithms</a></li>
			<li><a href="#engines_and_method_apis">Engines and &quot;METHOD&quot; APIs</a></li>
			<li><a href="#support_of_legacy_engines">Support of legacy engines</a></li>
			<li><a href="#versioning_scheme">Versioning Scheme</a></li>
			<li><a href="#other_major_new_features">Other major new features</a></li>
			<ul>

				<li><a href="#certificate_management_protocol__cmp__rfc_4210_">Certificate Management Protocol (CMP, <a href="http://www.ietf.org/rfc/rfc4210.txt" class="rfc">RFC 4210</a>)</a></li>
				<li><a href="#http_s__client">HTTP(S) client</a></li>
				<li><a href="#key_derivation_function_api__evp_kdf_">Key Derivation Function API (EVP_KDF)</a></li>
				<li><a href="#message_authentication_code_api__evp_mac_">Message Authentication Code API (EVP_MAC)</a></li>
				<li><a href="#algorithm_fetching">Algorithm Fetching</a></li>
				<li><a href="#support_for_linux_kernel_tls">Support for Linux Kernel TLS</a></li>
				<li><a href="#new_algorithms">New Algorithms</a></li>
				<li><a href="#cms_and_pkcs_7_updates">CMS and PKCS#7 updates</a></li>
				<li><a href="#pkcs_12_api_updates">PKCS#12 API updates</a></li>
				<li><a href="#pkcs_12_kdf_versus_fips">PKCS#12 KDF versus FIPS</a></li>
				<li><a href="#windows_thread_synchronization_changes">Windows thread synchronization changes</a></li>
				<li><a href="#trace_api">Trace API</a></li>
				<li><a href="#key_validation_updates">Key validation updates</a></li>
			</ul>

			<li><a href="#other_notable_deprecations_and_changes">Other notable deprecations and changes</a></li>
			<ul>

				<li><a href="#the_function_code_part_of_an_openssl_error_code_is_no_longer_relevant">The function code part of an OpenSSL error code is no longer relevant</a></li>
				<li><a href="#stack_and_hash_macros_have_been_cleaned_up">STACK and HASH macros have been cleaned up</a></li>
				<li><a href="#the_rand_drbg_subsystem_has_been_removed">The RAND_DRBG subsystem has been removed</a></li>
				<li><a href="#removed_fips_mode___and_fips_mode_set__">Removed <code>FIPS_mode()</code> and <code>FIPS_mode_set()</code></a></li>
				<li><a href="#key_generation_is_slower">Key generation is slower</a></li>
				<li><a href="#change_pbkdf2_to_conform_to_sp800_132_instead_of_the_older_pkcs5_rfc2898">Change PBKDF2 to conform to SP800-132 instead of the older PKCS5 <a href="http://www.ietf.org/rfc/rfc2898.txt" class="rfc">RFC2898</a></a></li>
				<li><a href="#enforce_a_minimum_dh_modulus_size_of_512_bits">Enforce a minimum DH modulus size of 512 bits</a></li>
				<li><a href="#sm2_key_changes">SM2 key changes</a></li>
				<li><a href="#evp_pkey_set_alias_type___method_has_been_removed"><code>EVP_PKEY_set_alias_type()</code> method has been removed</a></li>
				<li><a href="#functions_that_return_an_internal_key_should_be_treated_as_read_only">Functions that return an internal key should be treated as read only</a></li>
				<li><a href="#the_public_key_check_has_moved_from_evp_pkey_derive___to_evp_pkey_derive_set_peer__">The public key check has moved from <code>EVP_PKEY_derive()</code> to <code>EVP_PKEY_derive_set_peer()</code></a></li>
				<li><a href="#the_print_format_has_cosmetic_changes_for_some_functions">The print format has cosmetic changes for some functions</a></li>
				<li><a href="#interactive_mode_from_the_openssl_program_has_been_removed">Interactive mode from the <strong>openssl</strong> program has been removed</a></li>
				<li><a href="#the_error_return_values_from_some_control_calls__ctrl__have_changed">The error return values from some control calls (ctrl) have changed</a></li>
				<li><a href="#dh_and_dhx_key_types_have_different_settable_parameters">DH and DHX key types have different settable parameters</a></li>
				<li><a href="#evp_cipher_ctx_set_flags___ordering_change"><code>EVP_CIPHER_CTX_set_flags()</code> ordering change</a></li>
				<li><a href="#validation_of_operation_context_parameters">Validation of operation context parameters</a></li>
				<li><a href="#removal_of_function_code_from_the_error_codes">Removal of function code from the error codes</a></li>
				<li><a href="#chacha20_poly1305_cipher_does_not_allow_a_truncated_iv_length_to_be_used">ChaCha20-Poly1305 cipher does not allow a truncated IV length to be used</a></li>
			</ul>

		</ul>

		<li><a href="#installation_and_compilation">Installation and Compilation</a></li>
		<li><a href="#upgrading_from_openssl_1_1_1">Upgrading from OpenSSL 1.1.1</a></li>
		<ul>

			<li><a href="#error_code_changes">Error code changes</a></li>
		</ul>

		<li><a href="#upgrading_from_openssl_1_0_2">Upgrading from OpenSSL 1.0.2</a></li>
		<ul>

			<li><a href="#upgrading_from_the_openssl_2_0_fips_object_module">Upgrading from the OpenSSL 2.0 FIPS Object Module</a></li>
		</ul>

		<li><a href="#completing_the_installation_of_the_fips_module">Completing the installation of the FIPS Module</a></li>
		<li><a href="#programming">Programming</a></li>
		<ul>

			<li><a href="#library_context">Library Context</a></li>
			<ul>

				<li><a href="#using_a_library_context___old_functions_that_should_be_changed">Using a Library Context - Old functions that should be changed</a></li>
				<li><a href="#new_functions_that_use_a_library_context">New functions that use a Library context</a></li>
			</ul>

			<li><a href="#providers">Providers</a></li>
			<li><a href="#fetching_algorithms_and_property_queries">Fetching algorithms and property queries</a></li>
			<li><a href="#mapping_evp_controls_and_flags_to_provider_ossl_param_3__parameters">Mapping EVP controls and flags to provider <em>OSSL_PARAM(3)</em> parameters</a></li>
			<li><a href="#deprecation_of_low_level_functions">Deprecation of Low Level Functions</a></li>
			<ul>

				<li><a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a></li>
				<li><a href="#deprecated_i2d_and_d2i_functions_for_low_level_key_types">Deprecated i2d and d2i functions for low-level key types</a></li>
				<li><a href="#deprecated_low_level_key_object_getters_and_setters">Deprecated low-level key object getters and setters</a></li>
				<li><a href="#deprecated_low_level_key_parameter_getters">Deprecated low-level key parameter getters</a></li>
				<li><a href="#deprecated_low_level_key_parameter_setters">Deprecated low-level key parameter setters</a></li>
				<li><a href="#deprecated_low_level_object_creation">Deprecated low-level object creation</a></li>
				<li><a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a></li>
				<li><a href="#deprecated_low_level_digest_functions">Deprecated low-level digest functions</a></li>
				<li><a href="#deprecated_low_level_signing_functions">Deprecated low-level signing functions</a></li>
				<li><a href="#deprecated_low_level_mac_functions">Deprecated low-level MAC functions</a></li>
				<li><a href="#deprecated_low_level_validation_functions">Deprecated low-level validation functions</a></li>
				<li><a href="#deprecated_low_level_key_exchange_functions">Deprecated low-level key exchange functions</a></li>
				<li><a href="#deprecated_low_level_key_generation_functions">Deprecated low-level key generation functions</a></li>
				<li><a href="#deprecated_low_level_key_reading_and_writing_functions">Deprecated low-level key reading and writing functions</a></li>
				<li><a href="#deprecated_low_level_key_printing_functions">Deprecated low-level key printing functions</a></li>
			</ul>

			<li><a href="#deprecated_function_mappings">Deprecated function mappings</a></li>
			<li><a href="#nid_handling_for_provided_keys_and_algorithms">NID handling for provided keys and algorithms</a></li>
		</ul>

		<li><a href="#using_the_fips_module_in_applications">Using the FIPS Module in applications</a></li>
		<li><a href="#openssl_command_line_application_changes">OpenSSL command line application changes</a></li>
		<ul>

			<li><a href="#new_applications">New applications</a></li>
			<li><a href="#added_options">Added options</a></li>
			<li><a href="#removed_options">Removed options</a></li>
			<li><a href="#other_changes">Other Changes</a></li>
			<li><a href="#default_settings">Default settings</a></li>
			<li><a href="#deprecated_apps">Deprecated apps</a></li>
		</ul>

		<li><a href="#tls_changes">TLS Changes</a></li>
	</ul>

	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#history">HISTORY</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<hr />
<h1><a name="name">NAME</a></h1>
<p>migration_guide - OpenSSL migration guide</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>See the individual manual pages for details.</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>This guide details the changes required to migrate to new versions of OpenSSL.
Currently this covers OpenSSL 3.0. For earlier versions refer to
<a href="https://github.com/openssl/openssl/blob/master/CHANGES.md">https://github.com/openssl/openssl/blob/master/CHANGES.md</a>.
For an overview of some of the key concepts introduced in OpenSSL 3.0 see
<em>crypto(7)</em>.</p>
<p>
</p>
<hr />
<h1><a name="openssl_3_0">OPENSSL 3.0</a></h1>
<p>
</p>
<h2><a name="main_changes_from_openssl_1_1_1">Main Changes from OpenSSL 1.1.1</a></h2>
<p>
</p>
<h3><a name="major_release">Major Release</a></h3>
<p>OpenSSL 3.0 is a major release and consequently any application that currently
uses an older version of OpenSSL will at the very least need to be recompiled in
order to work with the new version. It is the intention that the large majority
of applications will work unchanged with OpenSSL 3.0 if those applications
previously worked with OpenSSL 1.1.1. However this is not guaranteed and some
changes may be required in some cases. Changes may also be required if
applications need to take advantage of some of the new features available in
OpenSSL 3.0 such as the availability of the FIPS module.</p>
<p>
</p>
<h3><a name="license_change">License Change</a></h3>
<p>In previous versions, OpenSSL was licensed under the <em>dual OpenSSL and SSLeay licenses</em>
(both licenses apply). From OpenSSL 3.0 this is replaced by the
<em>Apache License v2</em>.</p>
<p>
</p>
<h3><a name="providers_and_fips_support">Providers and FIPS support</a></h3>
<p>One of the key changes from OpenSSL 1.1.1 is the introduction of the Provider
concept. Providers collect together and make available algorithm implementations.
With OpenSSL 3.0 it is possible to specify, either programmatically or via a
config file, which providers you want to use for any given application.
OpenSSL 3.0 comes with 5 different providers as standard. Over time third
parties may distribute additional providers that can be plugged into OpenSSL.
All algorithm implementations available via providers are accessed through the
&quot;high level&quot; APIs (for example those functions prefixed with <code>EVP</code>). They cannot
be accessed using the <a href="#low_level_apis">Low Level APIs</a>.</p>
<p>One of the standard providers available is the FIPS provider. This makes
available FIPS validated cryptographic algorithms.
The FIPS provider is disabled by default and needs to be enabled explicitly
at configuration time using the <code>enable-fips</code> option. If it is enabled,
the FIPS provider gets built and installed in addition to the other standard
providers. No separate installation procedure is necessary.
There is however a dedicated <code>install_fips</code> make target, which serves the
special purpose of installing only the FIPS provider into an existing
OpenSSL installation.</p>
<p>Not all algorithms may be available for the application at a particular moment.
If the application code uses any digest or cipher algorithm via the EVP interface,
the application should verify the result of the <em>EVP_EncryptInit(3)</em>,
<em>EVP_EncryptInit_ex(3)</em>, and <em>EVP_DigestInit(3)</em> functions. In case when
the requested algorithm is not available, these functions will fail.</p>
<p>See also <a href="#legacy_algorithms">Legacy Algorithms</a> for information on the legacy provider.</p>
<p>See also <a href="#completing_the_installation_of_the_fips_module">Completing the installation of the FIPS Module</a> and
<a href="#using_the_fips_module_in_applications">Using the FIPS Module in applications</a>.</p>
<p>
</p>
<h3><a name="low_level_apis">Low Level APIs</a></h3>
<p>OpenSSL has historically provided two sets of APIs for invoking cryptographic
algorithms: the &quot;high level&quot; APIs (such as the <code>EVP</code> APIs) and the &quot;low level&quot;
APIs. The high level APIs are typically designed to work across all algorithm
types. The &quot;low level&quot; APIs are targeted at a specific algorithm implementation.
For example, the EVP APIs provide the functions <em>EVP_EncryptInit_ex(3)</em>,
<em>EVP_EncryptUpdate(3)</em> and <em>EVP_EncryptFinal(3)</em> to perform symmetric
encryption. Those functions can be used with the algorithms AES, CHACHA, 3DES etc.
On the other hand, to do AES encryption using the low level APIs you would have
to call AES specific functions such as <em>AES_set_encrypt_key(3)</em>,
<em>AES_encrypt(3)</em>, and so on. The functions for 3DES are different.
Use of the low level APIs has been informally discouraged by the OpenSSL
development team for a long time. However in OpenSSL 3.0 this is made more
formal. All such low level APIs have been deprecated. You may still use them in
your applications, but you may start to see deprecation warnings during
compilation (dependent on compiler support for this). Deprecated APIs may be
removed from future versions of OpenSSL so you are strongly encouraged to update
your code to use the high level APIs instead.</p>
<p>This is described in more detail in <a href="#deprecation_of_low_level_functions">Deprecation of Low Level Functions</a></p>
<p>
</p>
<h3><a name="legacy_algorithms">Legacy Algorithms</a></h3>
<p>Some cryptographic algorithms such as <strong>MD2</strong> and <strong>DES</strong> that were available via
the EVP APIs are now considered legacy and their use is strongly discouraged.
These legacy EVP algorithms are still available in OpenSSL 3.0 but not by
default. If you want to use them then you must load the legacy provider.
This can be as simple as a config file change, or can be done programmatically.
See <em>OSSL_PROVIDER-legacy(7)</em> for a complete list of algorithms.
Applications using the EVP APIs to access these algorithms should instead use
more modern algorithms. If that is not possible then these applications
should ensure that the legacy provider has been loaded. This can be achieved
either programmatically or via configuration. See <em>crypto(7)</em> man page for
more information about providers.</p>
<p>
</p>
<h3><a name="engines_and_method_apis">Engines and &quot;METHOD&quot; APIs</a></h3>
<p>The refactoring to support Providers conflicts internally with the APIs used to
support engines, including the ENGINE API and any function that creates or
modifies custom &quot;METHODS&quot; (for example <em>EVP_MD_meth_new(3)</em>,
<em>EVP_CIPHER_meth_new(3)</em>, <em>EVP_PKEY_meth_new(3)</em>, <em>RSA_meth_new(3)</em>,
<em>EC_KEY_METHOD_new(3)</em>, etc.). These functions are being deprecated in
OpenSSL 3.0, and users of these APIs should know that their use can likely
bypass provider selection and configuration, with unintended consequences.
This is particularly relevant for applications written to use the OpenSSL 3.0
FIPS module, as detailed below. Authors and maintainers of external engines are
strongly encouraged to refactor their code transforming engines into providers
using the new Provider API and avoiding deprecated methods.</p>
<p>
</p>
<h3><a name="support_of_legacy_engines">Support of legacy engines</a></h3>
<p>If openssl is not built without engine support or deprecated API support, engines
will still work. However, their applicability will be limited.</p>
<p>New algorithms provided via engines will still work.</p>
<p>Engine-backed keys can be loaded via custom <strong>OSSL_STORE</strong> implementation.
In this case the <strong>EVP_PKEY</strong> objects created via <em>ENGINE_load_private_key(3)</em>
will be considered legacy and will continue to work.</p>
<p>To ensure the future compatibility, the engines should be turned to providers.
To prefer the provider-based hardware offload, you can specify the default
properties to prefer your provider.</p>
<p>
</p>
<h3><a name="versioning_scheme">Versioning Scheme</a></h3>
<p>The OpenSSL versioning scheme has changed with the OpenSSL 3.0 release. The new
versioning scheme has this format:</p>
<p>MAJOR.MINOR.PATCH</p>
<p>For OpenSSL 1.1.1 and below, different patch levels were indicated by a letter
at the end of the release version number. This will no longer be used and
instead the patch level is indicated by the final number in the version. A
change in the second (MINOR) number indicates that new features may have been
added. OpenSSL versions with the same major number are API and ABI compatible.
If the major number changes then API and ABI compatibility is not guaranteed.</p>
<p>For more information, see <em>OpenSSL_version(3)</em>.</p>
<p>
</p>
<h3><a name="other_major_new_features">Other major new features</a></h3>
<p>
</p>
<h4><a name="certificate_management_protocol__cmp__rfc_4210_">Certificate Management Protocol (CMP, <a href="http://www.ietf.org/rfc/rfc4210.txt" class="rfc">RFC 4210</a>)</a></h4>
<p>This also covers CRMF (<a href="http://www.ietf.org/rfc/rfc4211.txt" class="rfc">RFC 4211</a>) and HTTP transfer (<a href="http://www.ietf.org/rfc/rfc6712.txt" class="rfc">RFC 6712</a>)
See <em>openssl-cmp(1)</em> and <em>OSSL_CMP_exec_certreq(3)</em> as starting points.</p>
<p>
</p>
<h4><a name="http_s__client">HTTP(S) client</a></h4>
<p>A proper HTTP(S) client that supports GET and POST, redirection, plain and
ASN.1-encoded contents, proxies, and timeouts.</p>
<p>
</p>
<h4><a name="key_derivation_function_api__evp_kdf_">Key Derivation Function API (EVP_KDF)</a></h4>
<p>This simplifies the process of adding new KDF and PRF implementations.</p>
<p>Previously KDF algorithms had been shoe-horned into using the EVP_PKEY object
which was not a logical mapping.
Existing applications that use KDF algorithms using EVP_PKEY
(scrypt, TLS1 PRF and HKDF) may be slower as they use an EVP_KDF bridge
internally.
All new applications should use the new <em>EVP_KDF(3)</em> interface.
See also <em>OSSL_PROVIDER-default(7)/Key Derivation Function (KDF)</em> and
<em>OSSL_PROVIDER-FIPS(7)/Key Derivation Function (KDF)</em>.</p>
<p>
</p>
<h4><a name="message_authentication_code_api__evp_mac_">Message Authentication Code API (EVP_MAC)</a></h4>
<p>This simplifies the process of adding MAC implementations.</p>
<p>This includes a generic EVP_PKEY to EVP_MAC bridge, to facilitate the continued
use of MACs through raw private keys in functionality such as
<em>EVP_DigestSign(3)</em> and <em>EVP_DigestVerify(3)</em>.</p>
<p>All new applications should use the new <em>EVP_MAC(3)</em> interface.
See also <em>OSSL_PROVIDER-default(7)/Message Authentication Code (MAC)</em>
and <em>OSSL_PROVIDER-FIPS(7)/Message Authentication Code (MAC)</em>.</p>
<p>
</p>
<h4><a name="algorithm_fetching">Algorithm Fetching</a></h4>
<p>Using calls to convenience functions such as EVP_sha256() and EVP_aes_256_gcm() may
incur a performance penalty when using providers.
Retrieving algorithms from providers involves searching for an algorithm by name.
This is much slower than directly accessing a method table.
It is recommended to prefetch algorithms if an algorithm is used many times.
See <em>crypto(7)/Performance</em>, <em>crypto(7)/Explicit fetching</em> and <em>crypto(7)/Implicit fetching</em>.</p>
<p>
</p>
<h4><a name="support_for_linux_kernel_tls">Support for Linux Kernel TLS</a></h4>
<p>In order to use KTLS, support for it must be compiled in using the
<code>enable-ktls</code> configuration option. It must also be enabled at run time using
the <strong>SSL_OP_ENABLE_KTLS</strong> option.</p>
<p>
</p>
<h4><a name="new_algorithms">New Algorithms</a></h4>
<ul>
<li>
<p>KDF algorithms &quot;SINGLE STEP&quot; and &quot;SSH&quot;</p>
<p>See <em>EVP_KDF-SS(7)</em> and <em>EVP_KDF-SSHKDF(7)</em></p>
</li>
<li>
<p>MAC Algorithms &quot;GMAC&quot; and &quot;KMAC&quot;</p>
<p>See <em>EVP_MAC-GMAC(7)</em> and <em>EVP_MAC-KMAC(7)</em>.</p>
</li>
<li>
<p>KEM Algorithm &quot;RSASVE&quot;</p>
<p>See <em>EVP_KEM-RSA(7)</em>.</p>
</li>
<li>
<p>Cipher Algorithm &quot;AES-SIV&quot;</p>
<p>See <em>EVP_EncryptInit(3)/SIV Mode</em>.</p>
</li>
<li>
<p>AES Key Wrap inverse ciphers supported by EVP layer.</p>
<p>The inverse ciphers use AES decryption for wrapping, and AES encryption for
unwrapping. The algorithms are: &quot;AES-128-WRAP-INV&quot;, &quot;AES-192-WRAP-INV&quot;,
&quot;AES-256-WRAP-INV&quot;, &quot;AES-128-WRAP-PAD-INV&quot;, &quot;AES-192-WRAP-PAD-INV&quot; and
&quot;AES-256-WRAP-PAD-INV&quot;.</p>
</li>
<li>
<p>CTS ciphers added to EVP layer.</p>
<p>The algorithms are &quot;AES-128-CBC-CTS&quot;, &quot;AES-192-CBC-CTS&quot;, &quot;AES-256-CBC-CTS&quot;,
&quot;CAMELLIA-128-CBC-CTS&quot;, &quot;CAMELLIA-192-CBC-CTS&quot; and &quot;CAMELLIA-256-CBC-CTS&quot;.
CS1, CS2 and CS3 variants are supported.</p>
</li>
</ul>
<p>
</p>
<h4><a name="cms_and_pkcs_7_updates">CMS and PKCS#7 updates</a></h4>
<ul>
<li>
<p>Added CAdES-BES signature verification support.</p>
</li>
<li>
<p>Added CAdES-BES signature scheme and attributes support (<a href="http://www.ietf.org/rfc/rfc5126.txt" class="rfc">RFC 5126</a>) to CMS API.</p>
</li>
<li>
<p>Added AuthEnvelopedData content type structure (<a href="http://www.ietf.org/rfc/rfc5083.txt" class="rfc">RFC 5083</a>) using AES_GCM</p>
<p>This uses the AES-GCM parameter (<a href="http://www.ietf.org/rfc/rfc5084.txt" class="rfc">RFC 5084</a>) for the Cryptographic Message Syntax.
Its purpose is to support encryption and decryption of a digital envelope that
is both authenticated and encrypted using AES GCM mode.</p>
</li>
<li>
<p><em>PKCS7_get_octet_string(3)</em> and <em>PKCS7_type_is_other(3)</em> were made public.</p>
</li>
</ul>
<p>
</p>
<h4><a name="pkcs_12_api_updates">PKCS#12 API updates</a></h4>
<p>The default algorithms for pkcs12 creation with the PKCS12_create() function
were changed to more modern PBKDF2 and AES based algorithms. The default
MAC iteration count was changed to PKCS12_DEFAULT_ITER to make it equal
with the password-based encryption iteration count. The default digest
algorithm for the MAC computation was changed to SHA-256. The pkcs12
application now supports -legacy option that restores the previous
default algorithms to support interoperability with legacy systems.</p>
<p>Added enhanced PKCS#12 APIs which accept a library context <strong>OSSL_LIB_CTX</strong>
and (where relevant) a property query. Other APIs which handle PKCS#7 and
PKCS#8 objects have also been enhanced where required. This includes:</p>
<p><em>PKCS12_add_key_ex(3)</em>, <em>PKCS12_add_safe_ex(3)</em>, <em>PKCS12_add_safes_ex(3)</em>,
<em>PKCS12_create_ex(3)</em>, <em>PKCS12_decrypt_skey_ex(3)</em>, <em>PKCS12_init_ex(3)</em>,
<em>PKCS12_item_decrypt_d2i_ex(3)</em>, <em>PKCS12_item_i2d_encrypt_ex(3)</em>,
<em>PKCS12_key_gen_asc_ex(3)</em>, <em>PKCS12_key_gen_uni_ex(3)</em>, <em>PKCS12_key_gen_utf8_ex(3)</em>,
<em>PKCS12_pack_p7encdata_ex(3)</em>, <em>PKCS12_pbe_crypt_ex(3)</em>, <em>PKCS12_PBE_keyivgen_ex(3)</em>,
<em>PKCS12_SAFEBAG_create_pkcs8_encrypt_ex(3)</em>, <em>PKCS5_pbe2_set_iv_ex(3)</em>,
<em>PKCS5_pbe_set0_algor_ex(3)</em>, <em>PKCS5_pbe_set_ex(3)</em>, <em>PKCS5_pbkdf2_set_ex(3)</em>,
<em>PKCS5_v2_PBE_keyivgen_ex(3)</em>, <em>PKCS5_v2_scrypt_keyivgen_ex(3)</em>,
<em>PKCS8_decrypt_ex(3)</em>, <em>PKCS8_encrypt_ex(3)</em>, <em>PKCS8_set0_pbe_ex(3)</em>.</p>
<p>As part of this change the EVP_PBE_xxx APIs can also accept a library
context and property query and will call an extended version of the key/IV
derivation function which supports these parameters. This includes
<em>EVP_PBE_CipherInit_ex(3)</em>, <em>EVP_PBE_find_ex(3)</em> and <em>EVP_PBE_scrypt_ex(3)</em>.</p>
<p>
</p>
<h4><a name="pkcs_12_kdf_versus_fips">PKCS#12 KDF versus FIPS</a></h4>
<p>Unlike in 1.x.y, the PKCS12KDF algorithm used when a PKCS#12 structure
is created with a MAC that does not work with the FIPS provider as the PKCS12KDF
is not a FIPS approvable mechanism.</p>
<p>See <em>EVP_KDF-PKCS12KDF(7)</em>, <em>PKCS12_create(3)</em>, <em>openssl-pkcs12(1)</em>,
<em>OSSL_PROVIDER-FIPS(7)</em>.</p>
<p>
</p>
<h4><a name="windows_thread_synchronization_changes">Windows thread synchronization changes</a></h4>
<p>Windows thread synchronization uses read/write primitives (SRWLock) when
supported by the OS, otherwise CriticalSection continues to be used.</p>
<p>
</p>
<h4><a name="trace_api">Trace API</a></h4>
<p>A new generic trace API has been added which provides support for enabling
instrumentation through trace output. This feature is mainly intended as an aid
for developers and is disabled by default. To utilize it, OpenSSL needs to be
configured with the <code>enable-trace</code> option.</p>
<p>If the tracing API is enabled, the application can activate trace output by
registering BIOs as trace channels for a number of tracing and debugging
categories. See <em>OSSL_trace_enabled(3)</em>.</p>
<p>
</p>
<h4><a name="key_validation_updates">Key validation updates</a></h4>
<p><em>EVP_PKEY_public_check(3)</em> and <em>EVP_PKEY_param_check(3)</em> now work for
more key types. This includes RSA, DSA, ED25519, X25519, ED448 and X448.
Previously (in 1.1.1) they would return -2. For key types that do not have
parameters then <em>EVP_PKEY_param_check(3)</em> will always return 1.</p>
<p>
</p>
<h3><a name="other_notable_deprecations_and_changes">Other notable deprecations and changes</a></h3>
<p>
</p>
<h4><a name="the_function_code_part_of_an_openssl_error_code_is_no_longer_relevant">The function code part of an OpenSSL error code is no longer relevant</a></h4>
<p>This code is now always set to zero. Related functions are deprecated.</p>
<p>
</p>
<h4><a name="stack_and_hash_macros_have_been_cleaned_up">STACK and HASH macros have been cleaned up</a></h4>
<p>The type-safe wrappers are declared everywhere and implemented once.
See <em>DEFINE_STACK_OF(3)</em> and <em>DECLARE_LHASH_OF(3)</em>.</p>
<p>
</p>
<h4><a name="the_rand_drbg_subsystem_has_been_removed">The RAND_DRBG subsystem has been removed</a></h4>
<p>The new <em>EVP_RAND(3)</em> is a partial replacement: the DRBG callback framework is
absent. The RAND_DRBG API did not fit well into the new provider concept as
implemented by EVP_RAND and EVP_RAND_CTX.</p>
<p>
</p>
<h4><a name="removed_fips_mode___and_fips_mode_set__">Removed <code>FIPS_mode()</code> and <code>FIPS_mode_set()</code></a></h4>
<p>These functions are legacy APIs that are not applicable to the new provider
model. Applications should instead use
<em>EVP_default_properties_is_fips_enabled(3)</em> and
<em>EVP_default_properties_enable_fips(3)</em>.</p>
<p>
</p>
<h4><a name="key_generation_is_slower">Key generation is slower</a></h4>
<p>The Miller-Rabin test now uses 64 rounds, which is used for all prime generation,
including RSA key generation. This affects the time for larger keys sizes.</p>
<p>The default key generation method for the regular 2-prime RSA keys was changed
to the FIPS186-4 B.3.6 method (Generation of Probable Primes with Conditions
Based on Auxiliary Probable Primes). This method is slower than the original
method.</p>
<p>
</p>
<h4><a name="change_pbkdf2_to_conform_to_sp800_132_instead_of_the_older_pkcs5_rfc2898">Change PBKDF2 to conform to SP800-132 instead of the older PKCS5 <a href="http://www.ietf.org/rfc/rfc2898.txt" class="rfc">RFC2898</a></a></h4>
<p>This checks that the salt length is at least 128 bits, the derived key length is
at least 112 bits, and that the iteration count is at least 1000.
For backwards compatibility these checks are disabled by default in the
default provider, but are enabled by default in the FIPS provider.</p>
<p>To enable or disable the checks see <strong>OSSL_KDF_PARAM_PKCS5</strong> in
<em>EVP_KDF-PBKDF2(7)</em>. The parameter can be set using <em>EVP_KDF_derive(3)</em>.</p>
<p>
</p>
<h4><a name="enforce_a_minimum_dh_modulus_size_of_512_bits">Enforce a minimum DH modulus size of 512 bits</a></h4>
<p>Smaller sizes now result in an error.</p>
<p>
</p>
<h4><a name="sm2_key_changes">SM2 key changes</a></h4>
<p>EC EVP_PKEYs with the SM2 curve have been reworked to automatically become
EVP_PKEY_SM2 rather than EVP_PKEY_EC.</p>
<p>Unlike in previous OpenSSL versions, this means that applications cannot
call <code>EVP_PKEY_set_alias_type(pkey, EVP_PKEY_SM2)</code> to get SM2 computations.</p>
<p>Parameter and key generation is also reworked to make it possible
to generate EVP_PKEY_SM2 parameters and keys. Applications must now generate
SM2 keys directly and must not create an EVP_PKEY_EC key first. It is no longer
possible to import an SM2 key with domain parameters other than the SM2 elliptic
curve ones.</p>
<p>Validation of SM2 keys has been separated from the validation of regular EC
keys, allowing to improve the SM2 validation process to reject loaded private
keys that are not conforming to the SM2 ISO standard.
In particular, a private scalar <em>k</em> outside the range <em>1 &lt;= k &lt; n-1 </em>&gt; is
now correctly rejected.</p>
<p>
</p>
<h4><a name="evp_pkey_set_alias_type___method_has_been_removed"><code>EVP_PKEY_set_alias_type()</code> method has been removed</a></h4>
<p>This function made a <strong>EVP_PKEY</strong> object mutable after it had been set up. In
OpenSSL 3.0 it was decided that a provided key should not be able to change its
type, so this function has been removed.</p>
<p>
</p>
<h4><a name="functions_that_return_an_internal_key_should_be_treated_as_read_only">Functions that return an internal key should be treated as read only</a></h4>
<p>Functions such as <em>EVP_PKEY_get0_RSA(3)</em> behave slightly differently in
OpenSSL 3.0. Previously they returned a pointer to the low-level key used
internally by libcrypto. From OpenSSL 3.0 this key may now be held in a
provider. Calling these functions will only return a handle on the internal key
where the EVP_PKEY was constructed using this key in the first place, for
example using a function or macro such as <em>EVP_PKEY_assign_RSA(3)</em>,
<em>EVP_PKEY_set1_RSA(3)</em>, etc.
Where the EVP_PKEY holds a provider managed key, then these functions now return
a cached copy of the key. Changes to the internal provider key that take place
after the first time the cached key is accessed will not be reflected back in
the cached copy. Similarly any changes made to the cached copy by application
code will not be reflected back in the internal provider key.</p>
<p>For the above reasons the keys returned from these functions should typically be
treated as read-only. To emphasise this the value returned from
<em>EVP_PKEY_get0_RSA(3)</em>, <em>EVP_PKEY_get0_DSA(3)</em>, <em>EVP_PKEY_get0_EC_KEY(3)</em> and
<em>EVP_PKEY_get0_DH(3)</em> have been made const. This may break some existing code.
Applications broken by this change should be modified. The preferred solution is
to refactor the code to avoid the use of these deprecated functions. Failing
this the code should be modified to use a const pointer instead.
The <em>EVP_PKEY_get1_RSA(3)</em>, <em>EVP_PKEY_get1_DSA(3)</em>, <em>EVP_PKEY_get1_EC_KEY(3)</em>
and <em>EVP_PKEY_get1_DH(3)</em> functions continue to return a non-const pointer to
enable them to be &quot;freed&quot;. However they should also be treated as read-only.</p>
<p>
</p>
<h4><a name="the_public_key_check_has_moved_from_evp_pkey_derive___to_evp_pkey_derive_set_peer__">The public key check has moved from <code>EVP_PKEY_derive()</code> to <code>EVP_PKEY_derive_set_peer()</code></a></h4>
<p>This may mean result in an error in <em>EVP_PKEY_derive_set_peer(3)</em> rather than
during <em>EVP_PKEY_derive(3)</em>.
To disable this check use EVP_PKEY_derive_set_peer_ex(dh, peer, 0).</p>
<p>
</p>
<h4><a name="the_print_format_has_cosmetic_changes_for_some_functions">The print format has cosmetic changes for some functions</a></h4>
<p>The output from numerous &quot;printing&quot; functions such as <em>X509_signature_print(3)</em>,
<em>X509_print_ex(3)</em>, <em>X509_CRL_print_ex(3)</em>, and other similar functions has been
amended such that there may be cosmetic differences between the output
observed in 1.1.1 and 3.0. This also applies to the <strong>-text</strong> output from the
<strong>openssl x509</strong> and <strong>openssl crl</strong> applications.</p>
<p>
</p>
<h4><a name="interactive_mode_from_the_openssl_program_has_been_removed">Interactive mode from the <strong>openssl</strong> program has been removed</a></h4>
<p>From now on, running it without arguments is equivalent to <strong>openssl help</strong>.</p>
<p>
</p>
<h4><a name="the_error_return_values_from_some_control_calls__ctrl__have_changed">The error return values from some control calls (ctrl) have changed</a></h4>
<p>One significant change is that controls which used to return -2 for
invalid inputs, now return -1 indicating a generic error condition instead.</p>
<p>
</p>
<h4><a name="dh_and_dhx_key_types_have_different_settable_parameters">DH and DHX key types have different settable parameters</a></h4>
<p>Previously (in 1.1.1) these conflicting parameters were allowed, but will now
result in errors. See <em>EVP_PKEY-DH(7)</em> for further details. This affects the
behaviour of <em>openssl-genpkey(1)</em> for DH parameter generation.</p>
<p>
</p>
<h4><a name="evp_cipher_ctx_set_flags___ordering_change"><code>EVP_CIPHER_CTX_set_flags()</code> ordering change</a></h4>
<p>If using a cipher from a provider the <strong>EVP_CIPH_FLAG_LENGTH_BITS</strong> flag can only
be set <strong>after</strong> the cipher has been assigned to the cipher context.
See <em>EVP_EncryptInit(3)/FLAGS</em> for more information.</p>
<p>
</p>
<h4><a name="validation_of_operation_context_parameters">Validation of operation context parameters</a></h4>
<p>Due to move of the implementation of cryptographic operations to the
providers, validation of various operation parameters can be postponed until
the actual operation is executed where previously it happened immediately
when an operation parameter was set.</p>
<p>For example when setting an unsupported curve with
<code>EVP_PKEY_CTX_set_ec_paramgen_curve_nid()</code> this function call will not fail
but later keygen operations with the EVP_PKEY_CTX will fail.</p>
<p>
</p>
<h4><a name="removal_of_function_code_from_the_error_codes">Removal of function code from the error codes</a></h4>
<p>The function code part of the error code is now always set to 0. For that
reason the <code>ERR_GET_FUNC()</code> macro was removed. Applications must resolve
the error codes only using the library number and the reason code.</p>
<p>
</p>
<h4><a name="chacha20_poly1305_cipher_does_not_allow_a_truncated_iv_length_to_be_used">ChaCha20-Poly1305 cipher does not allow a truncated IV length to be used</a></h4>
<p>In OpenSSL 3.0 setting the IV length to any value other than 12 will result in an
error.
Prior to OpenSSL 3.0 the ivlen could be smaller that the required 12 byte length,
using EVP_CIPHER_CTX_ctrl(ctx, EVP_CRTL_AEAD_SET_IVLEN, ivlen, NULL). This resulted
in an IV that had leading zero padding.</p>
<p>
</p>
<h2><a name="installation_and_compilation">Installation and Compilation</a></h2>
<p>Please refer to the INSTALL.md file in the top of the distribution for
instructions on how to build and install OpenSSL 3.0. Please also refer to the
various platform specific NOTES files for your specific platform.</p>
<p>
</p>
<h2><a name="upgrading_from_openssl_1_1_1">Upgrading from OpenSSL 1.1.1</a></h2>
<p>Upgrading to OpenSSL 3.0 from OpenSSL 1.1.1 should be relatively straight
forward in most cases. The most likely area where you will encounter problems
is if you have used low level APIs in your code (as discussed above). In that
case you are likely to start seeing deprecation warnings when compiling your
application. If this happens you have 3 options:</p>
<ol>
<li>
<p>Ignore the warnings. They are just warnings. The deprecated functions are still present and you may still use them. However be aware that they may be removed from a future version of OpenSSL.</p>
</li>
<li>
<p>Suppress the warnings. Refer to your compiler documentation on how to do this.</p>
</li>
<li>
<p>Remove your usage of the low level APIs. In this case you will need to rewrite your code to use the high level APIs instead</p>
</li>
</ol>
<p>
</p>
<h3><a name="error_code_changes">Error code changes</a></h3>
<p>As OpenSSL 3.0 provides a brand new Encoder/Decoder mechanism for working with
widely used file formats, application code that checks for particular error
reason codes on key loading failures might need an update.</p>
<p>Password-protected keys may deserve special attention. If only some errors
are treated as an indicator that the user should be asked about the password again,
it's worth testing these scenarios and processing the newly relevant codes.</p>
<p>There may be more cases to treat specially, depending on the calling application code.</p>
<p>
</p>
<h2><a name="upgrading_from_openssl_1_0_2">Upgrading from OpenSSL 1.0.2</a></h2>
<p>Upgrading to OpenSSL 3.0 from OpenSSL 1.0.2 is likely to be significantly more
difficult. In addition to the issues discussed above in the section about
<a href="#upgrading_from_openssl_1_1_1">Upgrading from OpenSSL 1.1.1</a>, the main things to be aware of are:</p>
<ol>
<li>
<p>The build and installation procedure has changed significantly.</p>
<p>Check the file INSTALL.md in the top of the installation for instructions on how
to build and install OpenSSL for your platform. Also read the various NOTES
files in the same directory, as applicable for your platform.</p>
</li>
<li>
<p>Many structures have been made opaque in OpenSSL 3.0.</p>
<p>The structure definitions have been removed from the public header files and
moved to internal header files. In practice this means that you can no longer
stack allocate some structures. Instead they must be heap allocated through some
function call (typically those function names have a <code>_new</code> suffix to them).
Additionally you must use &quot;setter&quot; or &quot;getter&quot; functions to access the fields
within those structures.</p>
<p>For example code that previously looked like this:</p>
<pre>
 <span class="variable">EVP_MD_CTX</span> <span class="variable">md_ctx</span><span class="operator">;</span>
</pre>
<pre>
 <span class="regex">/* This line will now generate compiler errors */</span>
 <span class="variable">EVP_MD_CTX_init</span><span class="operator">(&amp;</span><span class="variable">md_ctx</span><span class="operator">);</span>
</pre>
<p>The code needs to be amended to look like this:</p>
<pre>
 <span class="variable">EVP_MD_CTX</span> <span class="variable">*md_ctx</span><span class="operator">;</span>
</pre>
<pre>
 <span class="variable">md_ctx</span> <span class="operator">=</span> <span class="variable">EVP_MD_CTX_new</span><span class="operator">();</span>
 <span class="operator">...</span>
 <span class="operator">...</span>
 <span class="variable">EVP_MD_CTX_free</span><span class="operator">(</span><span class="variable">md_ctx</span><span class="operator">);</span>
</pre>
</li>
<li>
<p>Support for TLSv1.3 has been added.</p>
<p>This has a number of implications for SSL/TLS applications. See the
<em>TLS1.3 page</em> for further details.</p>
</li>
</ol>
<p>More details about the breaking changes between OpenSSL versions 1.0.2 and 1.1.0
can be found on the
<em>OpenSSL 1.1.0 Changes page</em>.</p>
<p>
</p>
<h3><a name="upgrading_from_the_openssl_2_0_fips_object_module">Upgrading from the OpenSSL 2.0 FIPS Object Module</a></h3>
<p>The OpenSSL 2.0 FIPS Object Module was a separate download that had to be built
separately and then integrated into your main OpenSSL 1.0.2 build.
In OpenSSL 3.0 the FIPS support is fully integrated into the mainline version of
OpenSSL and is no longer a separate download. For further information see
<a href="#completing_the_installation_of_the_fips_module">Completing the installation of the FIPS Module</a>.</p>
<p>The function calls <code>FIPS_mode()</code> and <code>FIPS_mode_set()</code> have been removed
from OpenSSL 3.0. You should rewrite your application to not use them.
See <em>fips_module(7)</em> and <em>OSSL_PROVIDER-FIPS(7)</em> for details.</p>
<p>
</p>
<h2><a name="completing_the_installation_of_the_fips_module">Completing the installation of the FIPS Module</a></h2>
<p>The FIPS Module will be built and installed automatically if FIPS support has
been configured. The current documentation can be found in the
<em>README-FIPS</em> file.</p>
<p>
</p>
<h2><a name="programming">Programming</a></h2>
<p>Applications written to work with OpenSSL 1.1.1 will mostly just work with
OpenSSL 3.0. However changes will be required if you want to take advantage of
some of the new features that OpenSSL 3.0 makes available. In order to do that
you need to understand some new concepts introduced in OpenSSL 3.0.
Read <em>crypto(7)/Library contexts</em> for further information.</p>
<p>
</p>
<h3><a name="library_context">Library Context</a></h3>
<p>A library context allows different components of a complex application to each
use a different library context and have different providers loaded with
different configuration settings.
See <em>crypto(7)/Library contexts</em> for further info.</p>
<p>If the user creates an <strong>OSSL_LIB_CTX</strong> via <em>OSSL_LIB_CTX_new(3)</em> then many
functions may need to be changed to pass additional parameters to handle the
library context.</p>
<p>
</p>
<h4><a name="using_a_library_context___old_functions_that_should_be_changed">Using a Library Context - Old functions that should be changed</a></h4>
<p>If a library context is needed then all EVP_* digest functions that return a
<strong>const EVP_MD *</strong> such as EVP_sha256() should be replaced with a call to
<em>EVP_MD_fetch(3)</em>. See <em>crypto(7)/ALGORITHM FETCHING</em>.</p>
<p>If a library context is needed then all EVP_* cipher functions that return a
<strong>const EVP_CIPHER *</strong> such as EVP_aes_128_cbc() should be replaced vith a call to
<em>EVP_CIPHER_fetch(3)</em>. See <em>crypto(7)/ALGORITHM FETCHING</em>.</p>
<p>Some functions can be passed an object that has already been set up with a library
context such as <em>d2i_X509(3)</em>, <em>d2i_X509_CRL(3)</em>, <em>d2i_X509_REQ(3)</em> and
<em>d2i_X509_PUBKEY(3)</em>. If NULL is passed instead then the created object will be
set up with the default library context. Use <em>X509_new_ex(3)</em>,
<em>X509_CRL_new_ex(3)</em>, <em>X509_REQ_new_ex(3)</em> and <em>X509_PUBKEY_new_ex(3)</em> if a
library context is required.</p>
<p>All functions listed below with a <em>NAME</em> have a replacement function <em>NAME_ex</em>
that takes <strong>OSSL_LIB_CTX</strong> as an additional argument. Functions that have other
mappings are listed along with the respective name.</p>
<ul>
<li>
<p><em>ASN1_item_new(3)</em>, <em>ASN1_item_d2i(3)</em>, <em>ASN1_item_d2i_fp(3)</em>,
<em>ASN1_item_d2i_bio(3)</em>, <em>ASN1_item_sign(3)</em> and <em>ASN1_item_verify(3)</em></p>
</li>
<li>
<p><em>BIO_new(3)</em></p>
</li>
<li>
<p>b2i_RSA_PVK_bio() and i2b_PVK_bio()</p>
</li>
<li>
<p><em>BN_CTX_new(3)</em> and <em>BN_CTX_secure_new(3)</em></p>
</li>
<li>
<p><em>CMS_AuthEnvelopedData_create(3)</em>, <em>CMS_ContentInfo_new(3)</em>, <em>CMS_data_create(3)</em>,
<em>CMS_digest_create(3)</em>, <em>CMS_EncryptedData_encrypt(3)</em>, <em>CMS_encrypt(3)</em>,
<em>CMS_EnvelopedData_create(3)</em>, <em>CMS_ReceiptRequest_create0(3)</em> and <em>CMS_sign(3)</em></p>
</li>
<li>
<p><em>CONF_modules_load_file(3)</em></p>
</li>
<li>
<p><em>CTLOG_new(3)</em>, <em>CTLOG_new_from_base64(3)</em> and <em>CTLOG_STORE_new(3)</em></p>
</li>
<li>
<p><em>CT_POLICY_EVAL_CTX_new(3)</em></p>
</li>
<li>
<p><em>d2i_AutoPrivateKey(3)</em>, <em>d2i_PrivateKey(3)</em> and <em>d2i_PUBKEY(3)</em></p>
</li>
<li>
<p><em>d2i_PrivateKey_bio(3)</em> and <em>d2i_PrivateKey_fp(3)</em></p>
<p>Use <em>d2i_PrivateKey_ex_bio(3)</em> and <em>d2i_PrivateKey_ex_fp(3)</em></p>
</li>
<li>
<p><em>EC_GROUP_new(3)</em></p>
<p>Use <em>EC_GROUP_new_by_curve_name_ex(3)</em> or <em>EC_GROUP_new_from_params(3)</em>.</p>
</li>
<li>
<p><em>EVP_DigestSignInit(3)</em> and <em>EVP_DigestVerifyInit(3)</em></p>
</li>
<li>
<p><em>EVP_PBE_CipherInit(3)</em>, <em>EVP_PBE_find(3)</em> and <em>EVP_PBE_scrypt(3)</em></p>
</li>
<li>
<p><em>PKCS5_PBE_keyivgen(3)</em></p>
</li>
<li>
<p><em>EVP_PKCS82PKEY(3)</em></p>
</li>
<li>
<p><em>EVP_PKEY_CTX_new_id(3)</em></p>
<p>Use <em>EVP_PKEY_CTX_new_from_name(3)</em></p>
</li>
<li>
<p><em>EVP_PKEY_derive_set_peer(3)</em>, <em>EVP_PKEY_new_raw_private_key(3)</em>
and <em>EVP_PKEY_new_raw_public_key(3)</em></p>
</li>
<li>
<p><em>EVP_SignFinal(3)</em> and <em>EVP_VerifyFinal(3)</em></p>
</li>
<li>
<p><em>NCONF_new(3)</em></p>
</li>
<li>
<p><em>OCSP_RESPID_match(3)</em> and <em>OCSP_RESPID_set_by_key(3)</em></p>
</li>
<li>
<p><em>OPENSSL_thread_stop(3)</em></p>
</li>
<li>
<p><em>OSSL_STORE_open(3)</em></p>
</li>
<li>
<p><em>PEM_read_bio_Parameters(3)</em>, <em>PEM_read_bio_PrivateKey(3)</em>, <em>PEM_read_bio_PUBKEY(3)</em>,
<em>PEM_read_PrivateKey(3)</em> and <em>PEM_read_PUBKEY(3)</em></p>
</li>
<li>
<p><em>PEM_write_bio_PrivateKey(3)</em>, <em>PEM_write_bio_PUBKEY(3)</em>, <em>PEM_write_PrivateKey(3)</em>
and <em>PEM_write_PUBKEY(3)</em></p>
</li>
<li>
<p><em>PEM_X509_INFO_read_bio(3)</em> and <em>PEM_X509_INFO_read(3)</em></p>
</li>
<li>
<p><em>PKCS12_add_key(3)</em>, <em>PKCS12_add_safe(3)</em>, <em>PKCS12_add_safes(3)</em>,
<em>PKCS12_create(3)</em>, <em>PKCS12_decrypt_skey(3)</em>, <em>PKCS12_init(3)</em>, <em>PKCS12_item_decrypt_d2i(3)</em>,
<em>PKCS12_item_i2d_encrypt(3)</em>, <em>PKCS12_key_gen_asc(3)</em>, <em>PKCS12_key_gen_uni(3)</em>,
<em>PKCS12_key_gen_utf8(3)</em>, <em>PKCS12_pack_p7encdata(3)</em>, <em>PKCS12_pbe_crypt(3)</em>,
<em>PKCS12_PBE_keyivgen(3)</em>, <em>PKCS12_SAFEBAG_create_pkcs8_encrypt(3)</em></p>
</li>
<li>
<p><em>PKCS5_pbe_set0_algor(3)</em>, <em>PKCS5_pbe_set(3)</em>, <em>PKCS5_pbe2_set_iv(3)</em>,
<em>PKCS5_pbkdf2_set(3)</em> and <em>PKCS5_v2_scrypt_keyivgen(3)</em></p>
</li>
<li>
<p><em>PKCS7_encrypt(3)</em>, <em>PKCS7_new(3)</em> and <em>PKCS7_sign(3)</em></p>
</li>
<li>
<p><em>PKCS8_decrypt(3)</em>, <em>PKCS8_encrypt(3)</em> and <em>PKCS8_set0_pbe(3)</em></p>
</li>
<li>
<p><em>RAND_bytes(3)</em> and <em>RAND_priv_bytes(3)</em></p>
</li>
<li>
<p><em>SMIME_write_ASN1(3)</em></p>
</li>
<li>
<p><em>SSL_load_client_CA_file(3)</em></p>
</li>
<li>
<p><em>SSL_CTX_new(3)</em></p>
</li>
<li>
<p><em>TS_RESP_CTX_new(3)</em></p>
</li>
<li>
<p><em>X509_CRL_new(3)</em></p>
</li>
<li>
<p><em>X509_load_cert_crl_file(3)</em> and <em>X509_load_cert_file(3)</em></p>
</li>
<li>
<p><em>X509_LOOKUP_by_subject(3)</em> and <em>X509_LOOKUP_ctrl(3)</em></p>
</li>
<li>
<p><em>X509_NAME_hash(3)</em></p>
</li>
<li>
<p><em>X509_new(3)</em></p>
</li>
<li>
<p><em>X509_REQ_new(3)</em> and <em>X509_REQ_verify(3)</em></p>
</li>
<li>
<p><em>X509_STORE_CTX_new(3)</em>, <em>X509_STORE_set_default_paths(3)</em>, <em>X509_STORE_load_file(3)</em>,
<em>X509_STORE_load_locations(3)</em> and <em>X509_STORE_load_store(3)</em></p>
</li>
</ul>
<p>
</p>
<h4><a name="new_functions_that_use_a_library_context">New functions that use a Library context</a></h4>
<p>The following functions can be passed a library context if required.
Passing NULL will use the default library context.</p>
<ul>
<li>
<p><em>BIO_new_from_core_bio(3)</em></p>
</li>
<li>
<p><em>EVP_ASYM_CIPHER_fetch(3)</em> and <em>EVP_ASYM_CIPHER_do_all_provided(3)</em></p>
</li>
<li>
<p><em>EVP_CIPHER_fetch(3)</em> and <em>EVP_CIPHER_do_all_provided(3)</em></p>
</li>
<li>
<p><em>EVP_default_properties_enable_fips(3)</em> and
<em>EVP_default_properties_is_fips_enabled(3)</em></p>
</li>
<li>
<p><em>EVP_KDF_fetch(3)</em> and <em>EVP_KDF_do_all_provided(3)</em></p>
</li>
<li>
<p><em>EVP_KEM_fetch(3)</em> and <em>EVP_KEM_do_all_provided(3)</em></p>
</li>
<li>
<p><em>EVP_KEYEXCH_fetch(3)</em> and <em>EVP_KEYEXCH_do_all_provided(3)</em></p>
</li>
<li>
<p><em>EVP_KEYMGMT_fetch(3)</em> and <em>EVP_KEYMGMT_do_all_provided(3)</em></p>
</li>
<li>
<p><em>EVP_MAC_fetch(3)</em> and <em>EVP_MAC_do_all_provided(3)</em></p>
</li>
<li>
<p><em>EVP_MD_fetch(3)</em> and <em>EVP_MD_do_all_provided(3)</em></p>
</li>
<li>
<p><em>EVP_PKEY_CTX_new_from_pkey(3)</em></p>
</li>
<li>
<p><em>EVP_PKEY_Q_keygen(3)</em></p>
</li>
<li>
<p><em>EVP_Q_mac(3)</em> and <em>EVP_Q_digest(3)</em></p>
</li>
<li>
<p><em>EVP_RAND(3)</em> and <em>EVP_RAND_do_all_provided(3)</em></p>
</li>
<li>
<p><em>EVP_set_default_properties(3)</em></p>
</li>
<li>
<p><em>EVP_SIGNATURE_fetch(3)</em> and <em>EVP_SIGNATURE_do_all_provided(3)</em></p>
</li>
<li>
<p><em>OSSL_CMP_CTX_new(3)</em> and <em>OSSL_CMP_SRV_CTX_new(3)</em></p>
</li>
<li>
<p><em>OSSL_CRMF_ENCRYPTEDVALUE_get1_encCert(3)</em></p>
</li>
<li>
<p><em>OSSL_CRMF_MSG_create_popo(3)</em> and <em>OSSL_CRMF_MSGS_verify_popo(3)</em></p>
</li>
<li>
<p><em>OSSL_CRMF_pbm_new(3)</em> and <em>OSSL_CRMF_pbmp_new(3)</em></p>
</li>
<li>
<p><em>OSSL_DECODER_CTX_add_extra(3)</em> and <em>OSSL_DECODER_CTX_new_for_pkey(3)</em></p>
</li>
<li>
<p><em>OSSL_DECODER_fetch(3)</em> and <em>OSSL_DECODER_do_all_provided(3)</em></p>
</li>
<li>
<p><em>OSSL_ENCODER_CTX_add_extra(3)</em></p>
</li>
<li>
<p><em>OSSL_ENCODER_fetch(3)</em> and <em>OSSL_ENCODER_do_all_provided(3)</em></p>
</li>
<li>
<p><em>OSSL_LIB_CTX_free(3)</em>, <em>OSSL_LIB_CTX_load_config(3)</em> and <em>OSSL_LIB_CTX_set0_default(3)</em></p>
</li>
<li>
<p><em>OSSL_PROVIDER_add_builtin(3)</em>, <em>OSSL_PROVIDER_available(3)</em>,
<em>OSSL_PROVIDER_do_all(3)</em>, <em>OSSL_PROVIDER_load(3)</em>,
<em>OSSL_PROVIDER_set_default_search_path(3)</em> and <em>OSSL_PROVIDER_try_load(3)</em></p>
</li>
<li>
<p><em>OSSL_SELF_TEST_get_callback(3)</em> and <em>OSSL_SELF_TEST_set_callback(3)</em></p>
</li>
<li>
<p><em>OSSL_STORE_attach(3)</em></p>
</li>
<li>
<p><em>OSSL_STORE_LOADER_fetch(3)</em> and <em>OSSL_STORE_LOADER_do_all_provided(3)</em></p>
</li>
<li>
<p><em>RAND_get0_primary(3)</em>, <em>RAND_get0_private(3)</em>, <em>RAND_get0_public(3)</em>,
<em>RAND_set_DRBG_type(3)</em> and <em>RAND_set_seed_source_type(3)</em></p>
</li>
</ul>
<p>
</p>
<h3><a name="providers">Providers</a></h3>
<p>Providers are described in detail here <em>crypto(7)/Providers</em>.
See also <em>crypto(7)/OPENSSL PROVIDERS</em>.</p>
<p>
</p>
<h3><a name="fetching_algorithms_and_property_queries">Fetching algorithms and property queries</a></h3>
<p>Implicit and Explicit Fetching is described in detail here
<em>crypto(7)/ALGORITHM FETCHING</em>.</p>
<p>
</p>
<h3><a name="mapping_evp_controls_and_flags_to_provider_ossl_param_3__parameters">Mapping EVP controls and flags to provider <em>OSSL_PARAM(3)</em> parameters</a></h3>
<p>The existing functions for controls (such as <em>EVP_CIPHER_CTX_ctrl(3)</em>) and
manipulating flags (such as <em>EVP_MD_CTX_set_flags(3)</em>)internally use
<strong>OSSL_PARAMS</strong> to pass information to/from provider objects.
See <em>OSSL_PARAM(3)</em> for additional information related to parameters.</p>
<p>For ciphers see <em>EVP_EncryptInit(3)/CONTROLS</em>, <em>EVP_EncryptInit(3)/FLAGS</em> and
<em>EVP_EncryptInit(3)/PARAMETERS</em>.</p>
<p>For digests see <em>EVP_DigestInit(3)/CONTROLS</em>, <em>EVP_DigestInit(3)/FLAGS</em> and
<em>EVP_DigestInit(3)/PARAMETERS</em>.</p>
<p>
</p>
<h3><a name="deprecation_of_low_level_functions">Deprecation of Low Level Functions</a></h3>
<p>A significant number of APIs have been deprecated in OpenSSL 3.0.
This section describes some common categories of deprecations.
See <a href="#deprecated_function_mappings">Deprecated function mappings</a> for the list of deprecated functions
that refer to these categories.</p>
<p>
</p>
<h4><a name="providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a></h4>
<p>Any accessor that uses an ENGINE is deprecated (such as EVP_PKEY_set1_engine()).
Applications using engines should instead use providers.</p>
<p>Before providers were added algorithms were overridden by changing the methods
used by algorithms. All these methods such as <code>RSA_new_method()</code> and <code>RSA_meth_new()</code>
are now deprecated and can be replaced by using providers instead.</p>
<p>
</p>
<h4><a name="deprecated_i2d_and_d2i_functions_for_low_level_key_types">Deprecated i2d and d2i functions for low-level key types</a></h4>
<p>Any i2d and d2i functions such as d2i_DHparams() that take a low-level key type
have been deprecated. Applications should instead use the <em>OSSL_DECODER(3)</em> and
<em>OSSL_ENCODER(3)</em> APIs to read and write files.
See <em>d2i_RSAPrivateKey(3)/Migration</em> for further details.</p>
<p>
</p>
<h4><a name="deprecated_low_level_key_object_getters_and_setters">Deprecated low-level key object getters and setters</a></h4>
<p>Applications that set or get low-level key objects (such as EVP_PKEY_set1_DH()
or EVP_PKEY_get0()) should instead use the OSSL_ENCODER
(See <em>OSSL_ENCODER_to_bio(3)</em>) or OSSL_DECODER (See <em>OSSL_DECODER_from_bio(3)</em>)
APIs, or alternatively use <em>EVP_PKEY_fromdata(3)</em> or <em>EVP_PKEY_todata(3)</em>.</p>
<p>
</p>
<h4><a name="deprecated_low_level_key_parameter_getters">Deprecated low-level key parameter getters</a></h4>
<p>Functions that access low-level objects directly such as <em>RSA_get0_n(3)</em> are now
deprecated. Applications should use one of <em>EVP_PKEY_get_bn_param(3)</em>,
<em>EVP_PKEY_get_int_param(3)</em>, l&lt;EVP_PKEY_get_size_t_param(3)&gt;,
<em>EVP_PKEY_get_utf8_string_param(3)</em>, <em>EVP_PKEY_get_octet_string_param(3)</em> or
<em>EVP_PKEY_get_params(3)</em> to access fields from an EVP_PKEY.
Gettable parameters are listed in <em>EVP_PKEY-RSA(7)/Common RSA parameters</em>,
<em>EVP_PKEY-DH(7)/DH parameters</em>, <em>EVP_PKEY-DSA(7)/DSA parameters</em>,
<em>EVP_PKEY-FFC(7)/FFC parameters</em>, <em>EVP_PKEY-EC(7)/Common EC parameters</em> and
<em>EVP_PKEY-X25519(7)/Common X25519, X448, ED25519 and ED448 parameters</em>.
Applications may also use <em>EVP_PKEY_todata(3)</em> to return all fields.</p>
<p>
</p>
<h4><a name="deprecated_low_level_key_parameter_setters">Deprecated low-level key parameter setters</a></h4>
<p>Functions that access low-level objects directly such as <em>RSA_set0_crt_params(3)</em>
are now deprecated. Applications should use <em>EVP_PKEY_fromdata(3)</em> to create
new keys from user provided key data. Keys should be immutable once they are
created, so if required the user may use <em>EVP_PKEY_todata(3)</em>, <em>OSSL_PARAM_merge(3)</em>,
and <em>EVP_PKEY_fromdata(3)</em> to create a modified key.
See <em>EVP_PKEY-DH(7)/Examples</em> for more information.
See <a href="#deprecated_low_level_key_generation_functions">Deprecated low-level key generation functions</a> for information on
generating a key using parameters.</p>
<p>
</p>
<h4><a name="deprecated_low_level_object_creation">Deprecated low-level object creation</a></h4>
<p>Low-level objects were created using methods such as <em>RSA_new(3)</em>,
<em>RSA_up_ref(3)</em> and <em>RSA_free(3)</em>. Applications should instead use the
high-level EVP_PKEY APIs, e.g. <em>EVP_PKEY_new(3)</em>, <em>EVP_PKEY_up_ref(3)</em> and
<em>EVP_PKEY_free(3)</em>.
See also <em>EVP_PKEY_CTX_new_from_name(3)</em> and <em>EVP_PKEY_CTX_new_from_pkey(3)</em>.</p>
<p>EVP_PKEYs may be created in a variety of ways:
See also <a href="#deprecated_low_level_key_generation_functions">Deprecated low-level key generation functions</a>,
<a href="#deprecated_low_level_key_reading_and_writing_functions">Deprecated low-level key reading and writing functions</a> and
<a href="#deprecated_low_level_key_parameter_setters">Deprecated low-level key parameter setters</a>.</p>
<p>
</p>
<h4><a name="deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a></h4>
<p>Low-level encryption functions such as <em>AES_encrypt(3)</em> and <em>AES_decrypt(3)</em>
have been informally discouraged from use for a long time. Applications should
instead use the high level EVP APIs <em>EVP_EncryptInit_ex(3)</em>,
<em>EVP_EncryptUpdate(3)</em>, and <em>EVP_EncryptFinal_ex(3)</em> or
<em>EVP_DecryptInit_ex(3)</em>, <em>EVP_DecryptUpdate(3)</em> and <em>EVP_DecryptFinal_ex(3)</em>.</p>
<p>
</p>
<h4><a name="deprecated_low_level_digest_functions">Deprecated low-level digest functions</a></h4>
<p>Use of low-level digest functions such as <em>SHA1_Init(3)</em> have been
informally discouraged from use for a long time.  Applications should instead
use the the high level EVP APIs <em>EVP_DigestInit_ex(3)</em>, <em>EVP_DigestUpdate(3)</em>
and <em>EVP_DigestFinal_ex(3)</em>, or the quick one-shot <em>EVP_Q_digest(3)</em>.</p>
<p>Note that the functions <em>SHA1(3)</em>, <em>SHA224(3)</em>, <em>SHA256(3)</em>, <em>SHA384(3)</em>
and <em>SHA512(3)</em> have changed to macros that use <em>EVP_Q_digest(3)</em>.</p>
<p>
</p>
<h4><a name="deprecated_low_level_signing_functions">Deprecated low-level signing functions</a></h4>
<p>Use of low-level signing functions such as <em>DSA_sign(3)</em> have been
informally discouraged for a long time. Instead applications should use
<em>EVP_DigestSign(3)</em> and <em>EVP_DigestVerify(3)</em>.
See also <em>EVP_SIGNATURE-RSA(7)</em>, <em>EVP_SIGNATURE-DSA(7)</em>,
<em>EVP_SIGNATURE-ECDSA(7)</em> and <em>EVP_SIGNATURE-ED25519(7)</em>.</p>
<p>
</p>
<h4><a name="deprecated_low_level_mac_functions">Deprecated low-level MAC functions</a></h4>
<p>Low-level mac functions such as <em>CMAC_Init(3)</em> are deprecated.
Applications should instead use the new <em>EVP_MAC(3)</em> interface, using
<em>EVP_MAC_CTX_new(3)</em>, <em>EVP_MAC_CTX_free(3)</em>, <em>EVP_MAC_init(3)</em>,
<em>EVP_MAC_update(3)</em> and <em>EVP_MAC_final(3)</em> or the single-shot MAC function
<em>EVP_Q_mac(3)</em>.
See <em>EVP_MAC(3)</em>, <em>EVP_MAC-HMAC(7)</em>, <em>EVP_MAC-CMAC(7)</em>, <em>EVP_MAC-GMAC(7)</em>,
<em>EVP_MAC-KMAC(7)</em>, <em>EVP_MAC-BLAKE2(7)</em>, <em>EVP_MAC-Poly1305(7)</em> and
<em>EVP_MAC-Siphash(7)</em> for additional information.</p>
<p>Note that the one-shot method <code>HMAC()</code> is still available for compatibility purposes,
but this can also be replaced by using EVP_Q_MAC if a library context is required.</p>
<p>
</p>
<h4><a name="deprecated_low_level_validation_functions">Deprecated low-level validation functions</a></h4>
<p>Low-level validation functions such as <em>DH_check(3)</em> have been informally
discouraged from use for a long time. Applications should instead use the high-level
EVP_PKEY APIs such as <em>EVP_PKEY_check(3)</em>, <em>EVP_PKEY_param_check(3)</em>,
<em>EVP_PKEY_param_check_quick(3)</em>, <em>EVP_PKEY_public_check(3)</em>,
<em>EVP_PKEY_public_check_quick(3)</em>, <em>EVP_PKEY_private_check(3)</em>,
and <em>EVP_PKEY_pairwise_check(3)</em>.</p>
<p>
</p>
<h4><a name="deprecated_low_level_key_exchange_functions">Deprecated low-level key exchange functions</a></h4>
<p>Many low-level functions have been informally discouraged from use for a long
time. Applications should instead use <em>EVP_PKEY_derive(3)</em>.
See <em>EVP_KEYEXCH-DH(7)</em>, <em>EVP_KEYEXCH-ECDH(7)</em> and <em>EVP_KEYEXCH-X25519(7)</em>.</p>
<p>
</p>
<h4><a name="deprecated_low_level_key_generation_functions">Deprecated low-level key generation functions</a></h4>
<p>Many low-level functions have been informally discouraged from use for a long
time. Applications should instead use <em>EVP_PKEY_keygen_init(3)</em> and
<em>EVP_PKEY_generate(3)</em> as described in <em>EVP_PKEY-DSA(7)</em>, <em>EVP_PKEY-DH(7)</em>,
<em>EVP_PKEY-RSA(7)</em>, <em>EVP_PKEY-EC(7)</em> and <em>EVP_PKEY-X25519(7)</em>.
The 'quick' one-shot function <em>EVP_PKEY_Q_keygen(3)</em> and macros for the most
common cases: &lt;EVP_RSA_gen(3)&gt; and <em>EVP_EC_gen(3)</em> may also be used.</p>
<p>
</p>
<h4><a name="deprecated_low_level_key_reading_and_writing_functions">Deprecated low-level key reading and writing functions</a></h4>
<p>Use of low-level objects (such as DSA) has been informally discouraged from use
for a long time. Functions to read and write these low-level objects (such as
PEM_read_DSA_PUBKEY()) should be replaced. Applications should instead use
<em>OSSL_ENCODER_to_bio(3)</em> and <em>OSSL_DECODER_from_bio(3)</em>.</p>
<p>
</p>
<h4><a name="deprecated_low_level_key_printing_functions">Deprecated low-level key printing functions</a></h4>
<p>Use of low-level objects (such as DSA) has been informally discouraged from use
for a long time. Functions to print these low-level objects such as
<code>DSA_print()</code> should be replaced with the equivalent EVP_PKEY functions.
Application should use one of <em>EVP_PKEY_print_public(3)</em>,
<em>EVP_PKEY_print_private(3)</em>, <em>EVP_PKEY_print_params(3)</em>,
<em>EVP_PKEY_print_public_fp(3)</em>, <em>EVP_PKEY_print_private_fp(3)</em> or
<em>EVP_PKEY_print_params_fp(3)</em>. Note that internally these use
<em>OSSL_ENCODER_to_bio(3)</em> and <em>OSSL_DECODER_from_bio(3)</em>.</p>
<p>
</p>
<h3><a name="deprecated_function_mappings">Deprecated function mappings</a></h3>
<p>The following functions have been deprecated in 3.0.</p>
<ul>
<li>
<p><code>AES_bi_ige_encrypt()</code> and <code>AES_ige_encrypt()</code></p>
<p>There is no replacement for the IGE functions. New code should not use these modes.
These undocumented functions were never integrated into the EVP layer.
They implemented the AES Infinite Garble Extension (IGE) mode and AES
Bi-directional IGE mode. These modes were never formally standardised and
usage of these functions is believed to be very small. In particular
<code>AES_bi_ige_encrypt()</code> has a known bug. It accepts 2 AES keys, but only one
is ever used. The security implications are believed to be minimal, but
this issue was never fixed for backwards compatibility reasons.</p>
</li>
<li>
<p><code>AES_encrypt()</code>, <code>AES_decrypt()</code>, <code>AES_set_encrypt_key()</code>, <code>AES_set_decrypt_key()</code>,
<code>AES_cbc_encrypt()</code>, AES_cfb128_encrypt(), AES_cfb1_encrypt(), AES_cfb8_encrypt(),
<code>AES_ecb_encrypt()</code>, AES_ofb128_encrypt()</p>
</li>
<li>
<p><code>AES_unwrap_key()</code>, <code>AES_wrap_key()</code></p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a></p>
</li>
<li>
<p><code>AES_options()</code></p>
<p>There is no replacement. It returned a string indicating if the AES code was unrolled.</p>
</li>
<li>
<p>ASN1_digest(), ASN1_sign(), ASN1_verify()</p>
<p>There are no replacements. These old functions are not used, and could be
disabled with the macro NO_ASN1_OLD since OpenSSL 0.9.7.</p>
</li>
<li>
<p>ASN1_STRING_length_set()</p>
<p>Use <em>ASN1_STRING_set(3)</em> or <em>ASN1_STRING_set0(3)</em> instead.
This was a potentially unsafe function that could change the bounds of a
previously passed in pointer.</p>
</li>
<li>
<p><code>BF_encrypt()</code>, <code>BF_decrypt()</code>, <code>BF_set_key()</code>, <code>BF_cbc_encrypt()</code>, BF_cfb64_encrypt(),
<code>BF_ecb_encrypt()</code>, BF_ofb64_encrypt()</p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.
The Blowfish algorithm has been moved to the <a href="#legacy_algorithms">Legacy Provider</a>.</p>
</li>
<li>
<p><code>BF_options()</code></p>
<p>There is no replacement. This option returned a constant string.</p>
</li>
<li>
<p><code>BIO_get_callback()</code>, <code>BIO_set_callback()</code>, <code>BIO_debug_callback()</code></p>
<p>Use the respective non-deprecated <code>_ex()</code> functions.</p>
</li>
<li>
<p><code>BN_is_prime_ex()</code>, <code>BN_is_prime_fasttest_ex()</code></p>
<p>Use <em>BN_check_prime(3)</em> which avoids possible misuse and always uses at least
64 rounds of the Miller-Rabin primality test.</p>
</li>
<li>
<p><code>BN_pseudo_rand()</code>, <code>BN_pseudo_rand_range()</code></p>
<p>Use <em>BN_rand(3)</em> and <em>BN_rand_range(3)</em>.</p>
</li>
<li>
<p>BN_X931_derive_prime_ex(), BN_X931_generate_prime_ex(), BN_X931_generate_Xpq()</p>
<p>There are no replacements for these low-level functions. They were used internally
by RSA_X931_derive_ex() and RSA_X931_generate_key_ex() which are also deprecated.
Use <em>EVP_PKEY_keygen(3)</em> instead.</p>
</li>
<li>
<p><code>Camellia_encrypt()</code>, <code>Camellia_decrypt()</code>, <code>Camellia_set_key()</code>,
<code>Camellia_cbc_encrypt()</code>, Camellia_cfb128_encrypt(), Camellia_cfb1_encrypt(),
Camellia_cfb8_encrypt(), Camellia_ctr128_encrypt(), <code>Camellia_ecb_encrypt()</code>,
Camellia_ofb128_encrypt()</p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.</p>
</li>
<li>
<p><code>CAST_encrypt()</code>, <code>CAST_decrypt()</code>, <code>CAST_set_key()</code>, <code>CAST_cbc_encrypt()</code>,
CAST_cfb64_encrypt(), <code>CAST_ecb_encrypt()</code>, CAST_ofb64_encrypt()</p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.
The CAST algorithm has been moved to the <a href="#legacy_algorithms">Legacy Provider</a>.</p>
</li>
<li>
<p><code>CMAC_CTX_new()</code>, <code>CMAC_CTX_cleanup()</code>, <code>CMAC_CTX_copy()</code>, <code>CMAC_CTX_free()</code>,
CMAC_CTX_get0_cipher_ctx()</p>
<p>See <a href="#deprecated_low_level_mac_functions">Deprecated low-level MAC functions</a>.</p>
</li>
<li>
<p><code>CMAC_Init()</code>, <code>CMAC_Update()</code>, <code>CMAC_Final()</code>, <code>CMAC_resume()</code></p>
<p>See <a href="#deprecated_low_level_mac_functions">Deprecated low-level MAC functions</a>.</p>
</li>
<li>
<p><code>CRYPTO_mem_ctrl()</code>, <code>CRYPTO_mem_debug_free()</code>, <code>CRYPTO_mem_debug_malloc()</code>,
<code>CRYPTO_mem_debug_pop()</code>, <code>CRYPTO_mem_debug_push()</code>, <code>CRYPTO_mem_debug_realloc()</code>,
<code>CRYPTO_mem_leaks()</code>, <code>CRYPTO_mem_leaks_cb()</code>, <code>CRYPTO_mem_leaks_fp()</code>,
<code>CRYPTO_set_mem_debug()</code></p>
<p>Memory-leak checking has been deprecated in favor of more modern development
tools, such as compiler memory and leak sanitizers or Valgrind.</p>
</li>
<li>
<p>CRYPTO_cts128_encrypt_block(), CRYPTO_cts128_encrypt(),
CRYPTO_cts128_decrypt_block(), CRYPTO_cts128_decrypt(),
CRYPTO_nistcts128_encrypt_block(), CRYPTO_nistcts128_encrypt(),
CRYPTO_nistcts128_decrypt_block(), CRYPTO_nistcts128_decrypt()</p>
<p>Use the higher level functions EVP_CipherInit_ex2(), <code>EVP_CipherUpdate()</code> and
<code>EVP_CipherFinal_ex()</code> instead.
See the &quot;cts_mode&quot; parameter in
<em>EVP_EncryptInit(3)/Gettable and Settable EVP_CIPHER_CTX parameters</em>.
See <em>EVP_EncryptInit(3)/EXAMPLES</em> for a AES-256-CBC-CTS example.</p>
</li>
<li>
<p>d2i_DHparams(), d2i_DHxparams(), d2i_DSAparams(), d2i_DSAPrivateKey(),
d2i_DSAPrivateKey_bio(), d2i_DSAPrivateKey_fp(), d2i_DSA_PUBKEY(),
d2i_DSA_PUBKEY_bio(), d2i_DSA_PUBKEY_fp(), d2i_DSAPublicKey(),
d2i_ECParameters(), d2i_ECPrivateKey(), d2i_ECPrivateKey_bio(),
d2i_ECPrivateKey_fp(), d2i_EC_PUBKEY(), d2i_EC_PUBKEY_bio(),
d2i_EC_PUBKEY_fp(), o2i_ECPublicKey(), d2i_RSAPrivateKey(),
d2i_RSAPrivateKey_bio(), d2i_RSAPrivateKey_fp(), d2i_RSA_PUBKEY(),
d2i_RSA_PUBKEY_bio(), d2i_RSA_PUBKEY_fp(), d2i_RSAPublicKey(),
d2i_RSAPublicKey_bio(), d2i_RSAPublicKey_fp()</p>
<p>See <a href="#deprecated_i2d_and_d2i_functions_for_low_level_key_types">Deprecated i2d and d2i functions for low-level key types</a></p>
</li>
<li>
<p><code>DES_crypt()</code>, <code>DES_fcrypt()</code>, DES_encrypt1(), DES_encrypt2(), DES_encrypt3(),
DES_decrypt3(), DES_ede3_cbc_encrypt(), DES_ede3_cfb64_encrypt(),
DES_ede3_cfb_encrypt(),DES_ede3_ofb64_encrypt(),
<code>DES_ecb_encrypt()</code>, DES_ecb3_encrypt(), DES_ofb64_encrypt(), <code>DES_ofb_encrypt()</code>,
DES_cfb64_encrypt <code>DES_cfb_encrypt()</code>, <code>DES_cbc_encrypt()</code>, <code>DES_ncbc_encrypt()</code>,
<code>DES_pcbc_encrypt()</code>, <code>DES_xcbc_encrypt()</code>, <code>DES_cbc_cksum()</code>, <code>DES_quad_cksum()</code>,
<code>DES_check_key_parity()</code>, <code>DES_is_weak_key()</code>, <code>DES_key_sched()</code>, <code>DES_options()</code>,
<code>DES_random_key()</code>, <code>DES_set_key()</code>, <code>DES_set_key_checked()</code>, <code>DES_set_key_unchecked()</code>,
<code>DES_set_odd_parity()</code>, DES_string_to_2keys(), <code>DES_string_to_key()</code></p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.
Algorithms for &quot;DESX-CBC&quot;, &quot;DES-ECB&quot;, &quot;DES-CBC&quot;, &quot;DES-OFB&quot;, &quot;DES-CFB&quot;,
&quot;DES-CFB1&quot; and &quot;DES-CFB8&quot; have been moved to the <a href="#legacy_algorithms">Legacy Provider</a>.</p>
</li>
<li>
<p><code>DH_bits()</code>, <code>DH_security_bits()</code>, <code>DH_size()</code></p>
<p>Use <em>EVP_PKEY_get_bits(3)</em>, <em>EVP_PKEY_get_security_bits(3)</em> and
<em>EVP_PKEY_get_size(3)</em>.</p>
</li>
<li>
<p><code>DH_check()</code>, <code>DH_check_ex()</code>, <code>DH_check_params()</code>, <code>DH_check_params_ex()</code>,
<code>DH_check_pub_key()</code>, <code>DH_check_pub_key_ex()</code></p>
<p>See <a href="#deprecated_low_level_validation_functions">Deprecated low-level validation functions</a></p>
</li>
<li>
<p><code>DH_clear_flags()</code>, <code>DH_test_flags()</code>, <code>DH_set_flags()</code></p>
<p>The <strong>DH_FLAG_CACHE_MONT_P</strong> flag has been deprecated without replacement.
The <strong>DH_FLAG_TYPE_DH</strong> and <strong>DH_FLAG_TYPE_DHX</strong> have been deprecated.
Use <code>EVP_PKEY_is_a()</code> to determine the type of a key.
There is no replacement for setting these flags.</p>
</li>
<li>
<p><code>DH_compute_key()</code> <code>DH_compute_key_padded()</code></p>
<p>See <a href="#deprecated_low_level_key_exchange_functions">Deprecated low-level key exchange functions</a>.</p>
</li>
<li>
<p><code>DH_new()</code>, <code>DH_new_by_nid()</code>, <code>DH_free()</code>, <code>DH_up_ref()</code></p>
<p>See <a href="#deprecated_low_level_object_creation">Deprecated low-level object creation</a></p>
</li>
<li>
<p><code>DH_generate_key()</code>, <code>DH_generate_parameters_ex()</code></p>
<p>See <a href="#deprecated_low_level_key_generation_functions">Deprecated low-level key generation functions</a>.</p>
</li>
<li>
<p>DH_get0_pqg(), DH_get0_p(), DH_get0_q(), DH_get0_g(), DH_get0_key(),
DH_get0_priv_key(), DH_get0_pub_key(), <code>DH_get_length()</code>, <code>DH_get_nid()</code></p>
<p>See <a href="#deprecated_low_level_key_parameter_getters">Deprecated low-level key parameter getters</a></p>
</li>
<li>
<p>DH_get_1024_160(), DH_get_2048_224(), DH_get_2048_256()</p>
<p>Applications should instead set the <strong>OSSL_PKEY_PARAM_GROUP_NAME</strong> as specified in
<em>EVP_PKEY-DH(7)/DH parameters</em>) to one of &quot;dh_1024_160&quot;, &quot;dh_2048_224&quot; or
&quot;dh_2048_256&quot; when generating a DH key.</p>
</li>
<li>
<p>DH_KDF_X9_42()</p>
<p>Applications should use <em>EVP_PKEY_CTX_set_dh_kdf_type(3)</em> instead.</p>
</li>
<li>
<p><code>DH_get_default_method()</code>, DH_get0_engine(), DH_meth_*(), <code>DH_new_method()</code>,
<code>DH_OpenSSL()</code>, <code>DH_get_ex_data()</code>, <code>DH_set_default_method()</code>, <code>DH_set_method()</code>,
<code>DH_set_ex_data()</code></p>
<p>See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a></p>
</li>
<li>
<p><code>DHparams_print()</code>, <code>DHparams_print_fp()</code></p>
<p>See <a href="#deprecated_low_level_key_printing_functions">Deprecated low-level key printing functions</a></p>
</li>
<li>
<p>DH_set0_key(), DH_set0_pqg(), <code>DH_set_length()</code></p>
<p>See <a href="#deprecated_low_level_key_parameter_setters">Deprecated low-level key parameter setters</a></p>
</li>
<li>
<p><code>DSA_bits()</code>, <code>DSA_security_bits()</code>, <code>DSA_size()</code></p>
<p>Use <em>EVP_PKEY_get_bits(3)</em>, <em>EVP_PKEY_get_security_bits(3)</em> and
<em>EVP_PKEY_get_size(3)</em>.</p>
</li>
<li>
<p><code>DHparams_dup()</code>, <code>DSA_dup_DH()</code></p>
<p>There is no direct replacement. Applications may use <em>EVP_PKEY_copy_parameters(3)</em>
and <em>EVP_PKEY_dup(3)</em> instead.</p>
</li>
<li>
<p><code>DSA_generate_key()</code>, <code>DSA_generate_parameters_ex()</code></p>
<p>See <a href="#deprecated_low_level_key_generation_functions">Deprecated low-level key generation functions</a>.</p>
</li>
<li>
<p>DSA_get0_engine(), <code>DSA_get_default_method()</code>, <code>DSA_get_ex_data()</code>,
<code>DSA_get_method()</code>, DSA_meth_*(), <code>DSA_new_method()</code>, <code>DSA_OpenSSL()</code>,
<code>DSA_set_default_method()</code>, <code>DSA_set_ex_data()</code>, <code>DSA_set_method()</code></p>
<p>See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a>.</p>
</li>
<li>
<p>DSA_get0_p(), DSA_get0_q(), DSA_get0_g(), DSA_get0_pqg(), DSA_get0_key(),
DSA_get0_priv_key(), DSA_get0_pub_key()</p>
<p>See <a href="#deprecated_low_level_key_parameter_getters">Deprecated low-level key parameter getters</a>.</p>
</li>
<li>
<p><code>DSA_new()</code>, <code>DSA_free()</code>, <code>DSA_up_ref()</code></p>
<p>See <a href="#deprecated_low_level_object_creation">Deprecated low-level object creation</a></p>
</li>
<li>
<p><code>DSAparams_dup()</code></p>
<p>There is no direct replacement. Applications may use <em>EVP_PKEY_copy_parameters(3)</em>
and <em>EVP_PKEY_dup(3)</em> instead.</p>
</li>
<li>
<p><code>DSAparams_print()</code>, <code>DSAparams_print_fp()</code>, <code>DSA_print()</code>, <code>DSA_print_fp()</code></p>
<p>See <a href="#deprecated_low_level_key_printing_functions">Deprecated low-level key printing functions</a></p>
</li>
<li>
<p>DSA_set0_key(), DSA_set0_pqg()</p>
<p>See <a href="#deprecated_low_level_key_parameter_setters">Deprecated low-level key parameter setters</a></p>
</li>
<li>
<p><code>DSA_set_flags()</code>, <code>DSA_clear_flags()</code>, <code>DSA_test_flags()</code></p>
<p>The <strong>DSA_FLAG_CACHE_MONT_P</strong> flag has been deprecated without replacement.</p>
</li>
<li>
<p><code>DSA_sign()</code>, <code>DSA_do_sign()</code>, <code>DSA_sign_setup()</code>, <code>DSA_verify()</code>, <code>DSA_do_verify()</code></p>
<p>See <a href="#deprecated_low_level_signing_functions">Deprecated low-level signing functions</a>.</p>
</li>
<li>
<p><code>ECDH_compute_key()</code></p>
<p>See <a href="#deprecated_low_level_key_exchange_functions">Deprecated low-level key exchange functions</a>.</p>
</li>
<li>
<p>ECDH_KDF_X9_62()</p>
<p>Applications may either set this using the helper function
<em>EVP_PKEY_CTX_set_ecdh_kdf_type(3)</em> or by setting an <em>OSSL_PARAM(3)</em> using the
&quot;kdf-type&quot; as shown in <em>EVP_KEYEXCH-ECDH(7)/EXAMPLES</em></p>
</li>
<li>
<p><code>ECDSA_sign()</code>, <code>ECDSA_sign_ex()</code>, <code>ECDSA_sign_setup()</code>, <code>ECDSA_do_sign()</code>,
<code>ECDSA_do_sign_ex()</code>, <code>ECDSA_verify()</code>, <code>ECDSA_do_verify()</code></p>
<p>See <a href="#deprecated_low_level_signing_functions">Deprecated low-level signing functions</a>.</p>
</li>
<li>
<p><code>ECDSA_size()</code></p>
<p>Applications should use <em>EVP_PKEY_get_size(3)</em>.</p>
</li>
<li>
<p>EC_GF2m_simple_method(), <code>EC_GFp_mont_method()</code>, <code>EC_GFp_nist_method()</code>,
EC_GFp_nistp224_method(), EC_GFp_nistp256_method(), EC_GFp_nistp521_method(),
<code>EC_GFp_simple_method()</code></p>
<p>There are no replacements for these functions. Applications should rely on the
library automatically assigning a suitable method internally when an EC_GROUP
is constructed.</p>
</li>
<li>
<p><code>EC_GROUP_clear_free()</code></p>
<p>Use <em>EC_GROUP_free(3)</em> instead.</p>
</li>
<li>
<p>EC_GROUP_get_curve_GF2m(), <code>EC_GROUP_get_curve_GFp()</code>, EC_GROUP_set_curve_GF2m(),
<code>EC_GROUP_set_curve_GFp()</code></p>
<p>Applications should use <em>EC_GROUP_get_curve(3)</em> and <em>EC_GROUP_set_curve(3)</em>.</p>
</li>
<li>
<p><code>EC_GROUP_have_precompute_mult()</code>, <code>EC_GROUP_precompute_mult()</code>,
<code>EC_KEY_precompute_mult()</code></p>
<p>These functions are not widely used. Applications should instead switch to
named curves which OpenSSL has hardcoded lookup tables for.</p>
</li>
<li>
<p><code>EC_GROUP_new()</code>, <code>EC_GROUP_method_of()</code>, <code>EC_POINT_method_of()</code></p>
<p>EC_METHOD is now an internal-only concept and a suitable EC_METHOD is assigned
internally without application intervention.
Users of <code>EC_GROUP_new()</code> should switch to a different suitable constructor.</p>
</li>
<li>
<p><code>EC_KEY_can_sign()</code></p>
<p>Applications should use <em>EVP_PKEY_can_sign(3)</em> instead.</p>
</li>
<li>
<p><code>EC_KEY_check_key()</code></p>
<p>See <a href="#deprecated_low_level_validation_functions">Deprecated low-level validation functions</a></p>
</li>
<li>
<p><code>EC_KEY_set_flags()</code>, <code>EC_KEY_get_flags()</code>, <code>EC_KEY_clear_flags()</code></p>
<p>See <em>EVP_PKEY-EC(7)/Common EC parameters</em> which handles flags as separate
parameters for <strong>OSSL_PKEY_PARAM_EC_POINT_CONVERSION_FORMAT</strong>,
<strong>OSSL_PKEY_PARAM_EC_GROUP_CHECK_TYPE</strong>, <strong>OSSL_PKEY_PARAM_EC_ENCODING</strong>,
<strong>OSSL_PKEY_PARAM_USE_COFACTOR_ECDH</strong> and
<strong>OSSL_PKEY_PARAM_EC_INCLUDE_PUBLIC</strong>.
See also <em>EVP_PKEY-EC(7)/EXAMPLES</em></p>
</li>
<li>
<p><code>EC_KEY_dup()</code>, <code>EC_KEY_copy()</code></p>
<p>There is no direct replacement. Applications may use <em>EVP_PKEY_copy_parameters(3)</em>
and <em>EVP_PKEY_dup(3)</em> instead.</p>
</li>
<li>
<p><code>EC_KEY_decoded_from_explicit_params()</code></p>
<p>There is no replacement.</p>
</li>
<li>
<p><code>EC_KEY_generate_key()</code></p>
<p>See <a href="#deprecated_low_level_key_generation_functions">Deprecated low-level key generation functions</a>.</p>
</li>
<li>
<p>EC_KEY_get0_group(), EC_KEY_get0_private_key(), EC_KEY_get0_public_key(),
<code>EC_KEY_get_conv_form()</code>, <code>EC_KEY_get_enc_flags()</code></p>
<p>See <a href="#deprecated_low_level_key_parameter_getters">Deprecated low-level key parameter getters</a>.</p>
</li>
<li>
<p>EC_KEY_get0_engine(), <code>EC_KEY_get_default_method()</code>, <code>EC_KEY_get_method()</code>,
<code>EC_KEY_new_method()</code>, <code>EC_KEY_get_ex_data()</code>, <code>EC_KEY_OpenSSL()</code>,
<code>EC_KEY_set_ex_data()</code>, <code>EC_KEY_set_default_method()</code>, EC_KEY_METHOD_*(),
<code>EC_KEY_set_method()</code></p>
<p>See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a></p>
</li>
<li>
<p><code>EC_METHOD_get_field_type()</code></p>
<p>Use <em>EC_GROUP_get_field_type(3)</em> instead.
See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a></p>
</li>
<li>
<p>EC_KEY_key2buf(), EC_KEY_oct2key(), EC_KEY_oct2priv(), EC_KEY_priv2buf(),
EC_KEY_priv2oct()</p>
<p>There are no replacements for these.</p>
</li>
<li>
<p><code>EC_KEY_new()</code>, <code>EC_KEY_new_by_curve_name()</code>, <code>EC_KEY_free()</code>, <code>EC_KEY_up_ref()</code></p>
<p>See <a href="#deprecated_low_level_object_creation">Deprecated low-level object creation</a></p>
</li>
<li>
<p><code>EC_KEY_print()</code>, <code>EC_KEY_print_fp()</code></p>
<p>See <a href="#deprecated_low_level_key_printing_functions">Deprecated low-level key printing functions</a></p>
</li>
<li>
<p>EC_KEY_set_asn1_flag(), <code>EC_KEY_set_conv_form()</code>, <code>EC_KEY_set_enc_flags()</code></p>
<p>See <a href="#deprecated_low_level_key_parameter_setters">Deprecated low-level key parameter setters</a>.</p>
</li>
<li>
<p><code>EC_KEY_set_group()</code>, <code>EC_KEY_set_private_key()</code>, <code>EC_KEY_set_public_key()</code>,
<code>EC_KEY_set_public_key_affine_coordinates()</code></p>
<p>See <a href="#deprecated_low_level_key_parameter_setters">Deprecated low-level key parameter setters</a>.</p>
</li>
<li>
<p><code>ECParameters_print()</code>, <code>ECParameters_print_fp()</code>, <code>ECPKParameters_print()</code>,
<code>ECPKParameters_print_fp()</code></p>
<p>See <a href="#deprecated_low_level_key_printing_functions">Deprecated low-level key printing functions</a></p>
</li>
<li>
<p>EC_POINT_bn2point(), EC_POINT_point2bn()</p>
<p>These functions were not particularly useful, since EC point serialization
formats are not individual big-endian integers.</p>
</li>
<li>
<p>EC_POINT_get_affine_coordinates_GF2m(), <code>EC_POINT_get_affine_coordinates_GFp()</code>,
EC_POINT_set_affine_coordinates_GF2m(), <code>EC_POINT_set_affine_coordinates_GFp()</code></p>
<p>Applications should use <em>EC_POINT_get_affine_coordinates(3)</em> and
<em>EC_POINT_set_affine_coordinates(3)</em> instead.</p>
</li>
<li>
<p><code>EC_POINT_get_Jprojective_coordinates_GFp()</code>, <code>EC_POINT_set_Jprojective_coordinates_GFp()</code></p>
<p>These functions are not widely used. Applications should instead use the
<em>EC_POINT_set_affine_coordinates(3)</em> and <em>EC_POINT_get_affine_coordinates(3)</em>
functions.</p>
</li>
<li>
<p><code>EC_POINT_make_affine()</code>, <code>EC_POINTs_make_affine()</code></p>
<p>There is no replacement. These functions were not widely used, and OpenSSL
automatically performs this conversion when needed.</p>
</li>
<li>
<p>EC_POINT_set_compressed_coordinates_GF2m(), <code>EC_POINT_set_compressed_coordinates_GFp()</code></p>
<p>Applications should use <em>EC_POINT_set_compressed_coordinates(3)</em> instead.</p>
</li>
<li>
<p><code>EC_POINTs_mul()</code></p>
<p>This function is not widely used. Applications should instead use the
<em>EC_POINT_mul(3)</em> function.</p>
</li>
<li>
<p><strong>ENGINE_*()</strong></p>
<p>All engine functions are deprecated. An engine should be rewritten as a provider.
See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a>.</p>
</li>
<li>
<p><strong>ERR_load_*()</strong>, <code>ERR_func_error_string()</code>, <code>ERR_get_error_line()</code>,
<code>ERR_get_error_line_data()</code>, <code>ERR_get_state()</code></p>
<p>OpenSSL now loads error strings automatically so these functions are not needed.</p>
</li>
<li>
<p><code>ERR_peek_error_line_data()</code>, <code>ERR_peek_last_error_line_data()</code></p>
<p>The new functions are <em>ERR_peek_error_func(3)</em>, <em>ERR_peek_last_error_func(3)</em>,
<em>ERR_peek_error_data(3)</em>, <em>ERR_peek_last_error_data(3)</em>, <em>ERR_get_error_all(3)</em>,
<em>ERR_peek_error_all(3)</em> and <em>ERR_peek_last_error_all(3)</em>.
Applications should use <em>ERR_get_error_all(3)</em>, or pick information
with ERR_peek functions and finish off with getting the error code by using
<em>ERR_get_error(3)</em>.</p>
</li>
<li>
<p><code>EVP_CIPHER_CTX_iv()</code>, <code>EVP_CIPHER_CTX_iv_noconst()</code>, <code>EVP_CIPHER_CTX_original_iv()</code></p>
<p>Applications should instead use <em>EVP_CIPHER_CTX_get_updated_iv(3)</em>,
<em>EVP_CIPHER_CTX_get_updated_iv(3)</em> and <em>EVP_CIPHER_CTX_get_original_iv(3)</em>
respectively.
See <em>EVP_CIPHER_CTX_get_original_iv(3)</em> for further information.</p>
</li>
<li>
<p><strong>EVP_CIPHER_meth_*()</strong>, <code>EVP_MD_CTX_set_update_fn()</code>, <code>EVP_MD_CTX_update_fn()</code>,
<strong>EVP_MD_meth_*()</strong></p>
<p>See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a>.</p>
</li>
<li>
<p>EVP_PKEY_CTRL_PKCS7_ENCRYPT(), EVP_PKEY_CTRL_PKCS7_DECRYPT(),
EVP_PKEY_CTRL_PKCS7_SIGN(), <code>EVP_PKEY_CTRL_CMS_ENCRYPT()</code>,
<code>EVP_PKEY_CTRL_CMS_DECRYPT()</code>, and <code>EVP_PKEY_CTRL_CMS_SIGN()</code></p>
<p>These control operations are not invoked by the OpenSSL library anymore and
are replaced by direct checks of the key operation against the key type
when the operation is initialized.</p>
</li>
<li>
<p>EVP_PKEY_CTX_get0_dh_kdf_ukm(), EVP_PKEY_CTX_get0_ecdh_kdf_ukm()</p>
<p>See the &quot;kdf-ukm&quot; item in <em>EVP_KEYEXCH-DH(7)/DH key exchange parameters</em> and
<em>EVP_KEYEXCH-ECDH(7)/ECDH Key Exchange parameters</em>.
These functions are obsolete and should not be required.</p>
</li>
<li>
<p><code>EVP_PKEY_CTX_set_rsa_keygen_pubexp()</code></p>
<p>Applications should use <em>EVP_PKEY_CTX_set1_rsa_keygen_pubexp(3)</em> instead.</p>
</li>
<li>
<p><code>EVP_PKEY_cmp()</code>, <code>EVP_PKEY_cmp_parameters()</code></p>
<p>Applications should use <em>EVP_PKEY_eq(3)</em> and <em>EVP_PKEY_parameters_eq(3)</em> instead.
See <em>EVP_PKEY_copy_parameters(3)</em> for further details.</p>
</li>
<li>
<p><code>EVP_PKEY_encrypt_old()</code>, <code>EVP_PKEY_decrypt_old()</code>,</p>
<p>Applications should use <em>EVP_PKEY_encrypt_init(3)</em> and <em>EVP_PKEY_encrypt(3)</em> or
<em>EVP_PKEY_decrypt_init(3)</em> and <em>EVP_PKEY_decrypt(3)</em> instead.</p>
</li>
<li>
<p>EVP_PKEY_get0()</p>
<p>This function returns NULL if the key comes from a provider.</p>
</li>
<li>
<p>EVP_PKEY_get0_DH(), EVP_PKEY_get0_DSA(), EVP_PKEY_get0_EC_KEY(), EVP_PKEY_get0_RSA(),
EVP_PKEY_get1_DH(), EVP_PKEY_get1_DSA(), EVP_PKEY_get1_EC_KEY and EVP_PKEY_get1_RSA(),
EVP_PKEY_get0_hmac(), EVP_PKEY_get0_poly1305(), EVP_PKEY_get0_siphash()</p>
<p>See <a href="#functions_that_return_an_internal_key_should_be_treated_as_read_only">Functions that return an internal key should be treated as read only</a>.</p>
</li>
<li>
<p><strong>EVP_PKEY_meth_*()</strong></p>
<p>See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a>.</p>
</li>
<li>
<p><code>EVP_PKEY_new_CMAC_key()</code></p>
<p>See <a href="#deprecated_low_level_mac_functions">Deprecated low-level MAC functions</a>.</p>
</li>
<li>
<p><code>EVP_PKEY_assign()</code>, EVP_PKEY_set1_DH(), EVP_PKEY_set1_DSA(),
EVP_PKEY_set1_EC_KEY(), EVP_PKEY_set1_RSA()</p>
<p>See <a href="#deprecated_low_level_key_object_getters_and_setters">Deprecated low-level key object getters and setters</a></p>
</li>
<li>
<p>EVP_PKEY_set1_tls_encodedpoint() EVP_PKEY_get1_tls_encodedpoint()</p>
<p>These functions were previously used by libssl to set or get an encoded public
key into/from an EVP_PKEY object. With OpenSSL 3.0 these are replaced by the more
generic functions <em>EVP_PKEY_set1_encoded_public_key(3)</em> and
<em>EVP_PKEY_get1_encoded_public_key(3)</em>.
The old versions have been converted to deprecated macros that just call the
new functions.</p>
</li>
<li>
<p>EVP_PKEY_set1_engine(), EVP_PKEY_get0_engine()</p>
<p>See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a>.</p>
</li>
<li>
<p><code>EVP_PKEY_set_alias_type()</code></p>
<p>This function has been removed. There is no replacement.
See <a href="#evp_pkey_set_alias_type___method_has_been_removed">EVP_PKEY_set_alias_type() method has been removed</a></p>
</li>
<li>
<p><code>HMAC_Init_ex()</code>, <code>HMAC_Update()</code>, <code>HMAC_Final()</code>, <code>HMAC_size()</code></p>
<p>See <a href="#deprecated_low_level_mac_functions">Deprecated low-level MAC functions</a>.</p>
</li>
<li>
<p><code>HMAC_CTX_new()</code>, <code>HMAC_CTX_free()</code>, <code>HMAC_CTX_copy()</code>, <code>HMAC_CTX_reset()</code>,
<code>HMAC_CTX_set_flags()</code>, <code>HMAC_CTX_get_md()</code></p>
<p>See <a href="#deprecated_low_level_mac_functions">Deprecated low-level MAC functions</a>.</p>
</li>
<li>
<p>i2d_DHparams(), i2d_DHxparams()</p>
<p>See <a href="#deprecated_low_level_key_reading_and_writing_functions">Deprecated low-level key reading and writing functions</a>
and <em>d2i_RSAPrivateKey(3)/Migration</em></p>
</li>
<li>
<p>i2d_DSAparams(), i2d_DSAPrivateKey(), i2d_DSAPrivateKey_bio(),
i2d_DSAPrivateKey_fp(), i2d_DSA_PUBKEY(), i2d_DSA_PUBKEY_bio(),
i2d_DSA_PUBKEY_fp(), i2d_DSAPublicKey()</p>
<p>See <a href="#deprecated_low_level_key_reading_and_writing_functions">Deprecated low-level key reading and writing functions</a>
and <em>d2i_RSAPrivateKey(3)/Migration</em></p>
</li>
<li>
<p>i2d_ECParameters(), i2d_ECPrivateKey(), i2d_ECPrivateKey_bio(),
i2d_ECPrivateKey_fp(), i2d_EC_PUBKEY(), i2d_EC_PUBKEY_bio(),
i2d_EC_PUBKEY_fp(), i2o_ECPublicKey()</p>
<p>See <a href="#deprecated_low_level_key_reading_and_writing_functions">Deprecated low-level key reading and writing functions</a>
and <em>d2i_RSAPrivateKey(3)/Migration</em></p>
</li>
<li>
<p>i2d_RSAPrivateKey(), i2d_RSAPrivateKey_bio(), i2d_RSAPrivateKey_fp(),
i2d_RSA_PUBKEY(), i2d_RSA_PUBKEY_bio(), i2d_RSA_PUBKEY_fp(),
i2d_RSAPublicKey(), i2d_RSAPublicKey_bio(), i2d_RSAPublicKey_fp()</p>
<p>See <a href="#deprecated_low_level_key_reading_and_writing_functions">Deprecated low-level key reading and writing functions</a>
and <em>d2i_RSAPrivateKey(3)/Migration</em></p>
</li>
<li>
<p><code>IDEA_encrypt()</code>, <code>IDEA_set_decrypt_key()</code>, <code>IDEA_set_encrypt_key()</code>,
<code>IDEA_cbc_encrypt()</code>, IDEA_cfb64_encrypt(), <code>IDEA_ecb_encrypt()</code>,
IDEA_ofb64_encrypt()</p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.
IDEA has been moved to the <a href="#legacy_algorithms">Legacy Provider</a>.</p>
</li>
<li>
<p><code>IDEA_options()</code></p>
<p>There is no replacement. This function returned a constant string.</p>
</li>
<li>
<p>MD2(), MD2_Init(), MD2_Update(), MD2_Final()</p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.
MD2 has been moved to the <a href="#legacy_algorithms">Legacy Provider</a>.</p>
</li>
<li>
<p>MD2_options()</p>
<p>There is no replacement. This function returned a constant string.</p>
</li>
<li>
<p>MD4(), MD4_Init(), MD4_Update(), MD4_Final(), MD4_Transform()</p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.
MD4 has been moved to the <a href="#legacy_algorithms">Legacy Provider</a>.</p>
</li>
<li>
<p>MDC2(), MDC2_Init(), MDC2_Update(), MDC2_Final()</p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.
MDC2 has been moved to the <a href="#legacy_algorithms">Legacy Provider</a>.</p>
</li>
<li>
<p>MD5(), MD5_Init(), MD5_Update(), MD5_Final(), MD5_Transform()</p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.</p>
</li>
<li>
<p>NCONF_WIN32()</p>
<p>This undocumented function has no replacement.
See <em>config(5)/HISTORY</em> for more details.</p>
</li>
<li>
<p><code>OCSP_parse_url()</code></p>
<p>Use <em>OSSL_HTTP_parse_url(3)</em> instead.</p>
</li>
<li>
<p><strong>OCSP_REQ_CTX</strong> type and <strong>OCSP_REQ_CTX_*()</strong> functions</p>
<p>These methods were used to collect all necessary data to form a HTTP request,
and to perform the HTTP transfer with that request.  With OpenSSL 3.0, the
type is <strong>OSSL_HTTP_REQ_CTX</strong>, and the deprecated functions are replaced
with <strong>OSSL_HTTP_REQ_CTX_*()</strong>. See <em>OSSL_HTTP_REQ_CTX(3)</em> for additional
details.</p>
</li>
<li>
<p><code>OPENSSL_fork_child()</code>, <code>OPENSSL_fork_parent()</code>, <code>OPENSSL_fork_prepare()</code></p>
<p>There is no replacement for these functions. These pthread fork support methods
were unused by OpenSSL.</p>
</li>
<li>
<p><code>OSSL_STORE_ctrl()</code>, <code>OSSL_STORE_do_all_loaders()</code>, OSSL_STORE_LOADER_get0_engine(),
OSSL_STORE_LOADER_get0_scheme(), <code>OSSL_STORE_LOADER_new()</code>,
<code>OSSL_STORE_LOADER_set_attach()</code>, <code>OSSL_STORE_LOADER_set_close()</code>,
<code>OSSL_STORE_LOADER_set_ctrl()</code>, <code>OSSL_STORE_LOADER_set_eof()</code>,
<code>OSSL_STORE_LOADER_set_error()</code>, <code>OSSL_STORE_LOADER_set_expect()</code>,
<code>OSSL_STORE_LOADER_set_find()</code>, <code>OSSL_STORE_LOADER_set_load()</code>,
<code>OSSL_STORE_LOADER_set_open()</code>, <code>OSSL_STORE_LOADER_set_open_ex()</code>,
<code>OSSL_STORE_register_loader()</code>, <code>OSSL_STORE_unregister_loader()</code>,
<code>OSSL_STORE_vctrl()</code></p>
<p>These functions helped applications and engines create loaders for
schemes they supported.  These are all deprecated and discouraged in favour of
provider implementations, see <em>provider-storemgmt(7)</em>.</p>
</li>
<li>
<p><code>PEM_read_DHparams()</code>, <code>PEM_read_bio_DHparams()</code>,
<code>PEM_read_DSAparams()</code>, <code>PEM_read_bio_DSAparams()</code>,
<code>PEM_read_DSAPrivateKey()</code>, <code>PEM_read_DSA_PUBKEY()</code>,
PEM_read_bio_DSAPrivateKey and <code>PEM_read_bio_DSA_PUBKEY()</code>,
<code>PEM_read_ECPKParameters()</code>, <code>PEM_read_ECPrivateKey()</code>, <code>PEM_read_EC_PUBKEY()</code>,
<code>PEM_read_bio_ECPKParameters()</code>, <code>PEM_read_bio_ECPrivateKey()</code>, <code>PEM_read_bio_EC_PUBKEY()</code>,
<code>PEM_read_RSAPrivateKey()</code>, <code>PEM_read_RSA_PUBKEY()</code>, <code>PEM_read_RSAPublicKey()</code>,
<code>PEM_read_bio_RSAPrivateKey()</code>, <code>PEM_read_bio_RSA_PUBKEY()</code>, <code>PEM_read_bio_RSAPublicKey()</code>,
<code>PEM_write_bio_DHparams()</code>, <code>PEM_write_bio_DHxparams()</code>, <code>PEM_write_DHparams()</code>, <code>PEM_write_DHxparams()</code>,
<code>PEM_write_DSAparams()</code>, <code>PEM_write_DSAPrivateKey()</code>, <code>PEM_write_DSA_PUBKEY()</code>,
<code>PEM_write_bio_DSAparams()</code>, <code>PEM_write_bio_DSAPrivateKey()</code>, <code>PEM_write_bio_DSA_PUBKEY()</code>,
<code>PEM_write_ECPKParameters()</code>, <code>PEM_write_ECPrivateKey()</code>, <code>PEM_write_EC_PUBKEY()</code>,
<code>PEM_write_bio_ECPKParameters()</code>, <code>PEM_write_bio_ECPrivateKey()</code>, <code>PEM_write_bio_EC_PUBKEY()</code>,
<code>PEM_write_RSAPrivateKey()</code>, <code>PEM_write_RSA_PUBKEY()</code>, <code>PEM_write_RSAPublicKey()</code>,
<code>PEM_write_bio_RSAPrivateKey()</code>, <code>PEM_write_bio_RSA_PUBKEY()</code>,
<code>PEM_write_bio_RSAPublicKey()</code>,</p>
<p>See <a href="#deprecated_low_level_key_reading_and_writing_functions">Deprecated low-level key reading and writing functions</a></p>
</li>
<li>
<p>PKCS1_MGF1()</p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.</p>
</li>
<li>
<p><code>RAND_get_rand_method()</code>, <code>RAND_set_rand_method()</code>, <code>RAND_OpenSSL()</code>,
<code>RAND_set_rand_engine()</code></p>
<p>Applications should instead use <em>RAND_set_DRBG_type(3)</em>,
<em>EVP_RAND(3)</em> and <em>EVP_RAND(7)</em>.
See <em>RAND_set_rand_method(3)</em> for more details.</p>
</li>
<li>
<p>RC2_encrypt(), RC2_decrypt(), RC2_set_key(), RC2_cbc_encrypt(), RC2_cfb64_encrypt(),
RC2_ecb_encrypt(), RC2_ofb64_encrypt(),
RC4(), RC4_set_key(), RC4_options(),
RC5_32_encrypt(), RC5_32_set_key(), RC5_32_decrypt(), RC5_32_cbc_encrypt(),
RC5_32_cfb64_encrypt(), RC5_32_ecb_encrypt(), RC5_32_ofb64_encrypt()</p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.
The Algorithms &quot;RC2&quot;, &quot;RC4&quot; and &quot;RC5&quot; have been moved to the <a href="#legacy_algorithms">Legacy Provider</a>.</p>
</li>
<li>
<p>RIPEMD160(), RIPEMD160_Init(), RIPEMD160_Update(), RIPEMD160_Final(),
RIPEMD160_Transform()</p>
<p>See <a href="#deprecated_low_level_digest_functions">Deprecated low-level digest functions</a>.
The RIPE algorithm has been moved to the <a href="#legacy_algorithms">Legacy Provider</a>.</p>
</li>
<li>
<p><code>RSA_bits()</code>, <code>RSA_security_bits()</code>, <code>RSA_size()</code></p>
<p>Use <em>EVP_PKEY_get_bits(3)</em>, <em>EVP_PKEY_get_security_bits(3)</em> and
<em>EVP_PKEY_get_size(3)</em>.</p>
</li>
<li>
<p><code>RSA_check_key()</code>, <code>RSA_check_key_ex()</code></p>
<p>See <a href="#deprecated_low_level_validation_functions">Deprecated low-level validation functions</a></p>
</li>
<li>
<p><code>RSA_clear_flags()</code>, <code>RSA_flags()</code>, <code>RSA_set_flags()</code>, <code>RSA_test_flags()</code>,
<code>RSA_setup_blinding()</code>, <code>RSA_blinding_off()</code>, <code>RSA_blinding_on()</code></p>
<p>All of these RSA flags have been deprecated without replacement:</p>
<p><strong>RSA_FLAG_BLINDING</strong>, <strong>RSA_FLAG_CACHE_PRIVATE</strong>, <strong>RSA_FLAG_CACHE_PUBLIC</strong>,
<strong>RSA_FLAG_EXT_PKEY</strong>, <strong>RSA_FLAG_NO_BLINDING</strong>, <strong>RSA_FLAG_THREAD_SAFE</strong>
<strong>RSA_METHOD_FLAG_NO_CHECK</strong></p>
</li>
<li>
<p><code>RSA_generate_key_ex()</code>, <code>RSA_generate_multi_prime_key()</code></p>
<p>See <a href="#deprecated_low_level_key_generation_functions">Deprecated low-level key generation functions</a>.</p>
</li>
<li>
<p>RSA_get0_engine()</p>
<p>See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a></p>
</li>
<li>
<p>RSA_get0_crt_params(), RSA_get0_d(), RSA_get0_dmp1(), RSA_get0_dmq1(),
RSA_get0_e(), RSA_get0_factors(), RSA_get0_iqmp(), RSA_get0_key(),
RSA_get0_multi_prime_crt_params(), RSA_get0_multi_prime_factors(), RSA_get0_n(),
RSA_get0_p(), RSA_get0_pss_params(), RSA_get0_q(),
<code>RSA_get_multi_prime_extra_count()</code></p>
<p>See <a href="#deprecated_low_level_key_parameter_getters">Deprecated low-level key parameter getters</a></p>
</li>
<li>
<p><code>RSA_new()</code>, <code>RSA_free()</code>, <code>RSA_up_ref()</code></p>
<p>See <a href="#deprecated_low_level_object_creation">Deprecated low-level object creation</a>.</p>
</li>
<li>
<p><code>RSA_get_default_method()</code>, RSA_get_ex_data and <code>RSA_get_method()</code></p>
<p>See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a>.</p>
</li>
<li>
<p><code>RSA_get_version()</code></p>
<p>There is no replacement.</p>
</li>
<li>
<p><strong>RSA_meth_*()</strong>, <code>RSA_new_method()</code>, RSA_null_method and RSA_PKCS1_OpenSSL()</p>
<p>See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a>.</p>
</li>
<li>
<p><strong>RSA_padding_add_*()</strong>, <strong>RSA_padding_check_*()</strong></p>
<p>See <a href="#deprecated_low_level_signing_functions">Deprecated low-level signing functions</a> and
<a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.</p>
</li>
<li>
<p><code>RSA_print()</code>, <code>RSA_print_fp()</code></p>
<p>See <a href="#deprecated_low_level_key_printing_functions">Deprecated low-level key printing functions</a></p>
</li>
<li>
<p><code>RSA_public_encrypt()</code>, <code>RSA_private_decrypt()</code></p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a></p>
</li>
<li>
<p><code>RSA_private_encrypt()</code>, <code>RSA_public_decrypt()</code></p>
<p>This is equivalent to doing sign and verify recover operations (with a padding
mode of none). See <a href="#deprecated_low_level_signing_functions">Deprecated low-level signing functions</a>.</p>
</li>
<li>
<p><code>RSAPrivateKey_dup()</code>, <code>RSAPublicKey_dup()</code></p>
<p>There is no direct replacement. Applications may use <em>EVP_PKEY_dup(3)</em>.</p>
</li>
<li>
<p><code>RSAPublicKey_it()</code>, <code>RSAPrivateKey_it()</code></p>
<p>See <a href="#deprecated_low_level_key_reading_and_writing_functions">Deprecated low-level key reading and writing functions</a></p>
</li>
<li>
<p>RSA_set0_crt_params(), RSA_set0_factors(), RSA_set0_key(),
RSA_set0_multi_prime_params()</p>
<p>See <a href="#deprecated_low_level_key_parameter_setters">Deprecated low-level key parameter setters</a>.</p>
</li>
<li>
<p><code>RSA_set_default_method()</code>, <code>RSA_set_method()</code>, <code>RSA_set_ex_data()</code></p>
<p>See <a href="#providers_are_a_replacement_for_engines_and_low_level_method_overrides">Providers are a replacement for engines and low-level method overrides</a></p>
</li>
<li>
<p><code>RSA_sign()</code>, RSA_sign_ASN1_OCTET_STRING(), <code>RSA_verify()</code>,
RSA_verify_ASN1_OCTET_STRING(), RSA_verify_PKCS1_PSS(),
RSA_verify_PKCS1_PSS_mgf1()</p>
<p>See <a href="#deprecated_low_level_signing_functions">Deprecated low-level signing functions</a>.</p>
</li>
<li>
<p>RSA_X931_derive_ex(), RSA_X931_generate_key_ex(), RSA_X931_hash_id()</p>
<p>There are no replacements for these functions.
X931 padding can be set using <em>EVP_SIGNATURE-RSA(7)/Signature Parameters</em>.
See <strong>OSSL_SIGNATURE_PARAM_PAD_MODE</strong>.</p>
</li>
<li>
<p><code>SEED_encrypt()</code>, <code>SEED_decrypt()</code>, <code>SEED_set_key()</code>, <code>SEED_cbc_encrypt()</code>,
SEED_cfb128_encrypt(), <code>SEED_ecb_encrypt()</code>, SEED_ofb128_encrypt()</p>
<p>See <a href="#deprecated_low_level_encryption_functions">Deprecated low-level encryption functions</a>.
The SEED algorithm has been moved to the <a href="#legacy_algorithms">Legacy Provider</a>.</p>
</li>
<li>
<p>SHA1_Init(), SHA1_Update(), SHA1_Final(), SHA1_Transform(),
SHA224_Init(), SHA224_Update(), SHA224_Final(),
SHA256_Init(), SHA256_Update(), SHA256_Final(), SHA256_Transform(),
SHA384_Init(), SHA384_Update(), SHA384_Final(),
SHA512_Init(), SHA512_Update(), SHA512_Final(), SHA512_Transform()</p>
<p>See <a href="#deprecated_low_level_digest_functions">Deprecated low-level digest functions</a>.</p>
</li>
<li>
<p><code>SRP_Calc_A()</code>, <code>SRP_Calc_B()</code>, <code>SRP_Calc_client_key()</code>, <code>SRP_Calc_server_key()</code>,
<code>SRP_Calc_u()</code>, <code>SRP_Calc_x()</code>, <code>SRP_check_known_gN_param()</code>, <code>SRP_create_verifier()</code>,
<code>SRP_create_verifier_BN()</code>, <code>SRP_get_default_gN()</code>, <code>SRP_user_pwd_free()</code>, <code>SRP_user_pwd_new()</code>,
SRP_user_pwd_set0_sv(), SRP_user_pwd_set1_ids(), <code>SRP_user_pwd_set_gN()</code>,
SRP_VBASE_add0_user(), <code>SRP_VBASE_free()</code>, SRP_VBASE_get1_by_user(), <code>SRP_VBASE_init()</code>,
<code>SRP_VBASE_new()</code>, <code>SRP_Verify_A_mod_N()</code>, <code>SRP_Verify_B_mod_N()</code></p>
<p>There are no replacements for the SRP functions.</p>
</li>
<li>
<p><code>SSL_CTX_set_tmp_dh_callback()</code>, <code>SSL_set_tmp_dh_callback()</code>,
<code>SSL_CTX_set_tmp_dh()</code>, <code>SSL_set_tmp_dh()</code></p>
<p>These are used to set the Diffie-Hellman (DH) parameters that are to be used by
servers requiring ephemeral DH keys. Instead applications should consider using
the built-in DH parameters that are available by calling <em>SSL_CTX_set_dh_auto(3)</em>
or <em>SSL_set_dh_auto(3)</em>. If custom parameters are necessary then applications can
use the alternative functions <em>SSL_CTX_set0_tmp_dh_pkey(3)</em> and
<em>SSL_set0_tmp_dh_pkey(3)</em>. There is no direct replacement for the &quot;callback&quot;
functions. The callback was originally useful in order to have different
parameters for export and non-export ciphersuites. Export ciphersuites are no
longer supported by OpenSSL. Use of the callback functions should be replaced
by one of the other methods described above.</p>
</li>
<li>
<p><code>SSL_CTX_set_tlsext_ticket_key_cb()</code></p>
<p>Use the new <em>SSL_CTX_set_tlsext_ticket_key_evp_cb(3)</em> function instead.</p>
</li>
<li>
<p><code>WHIRLPOOL()</code>, <code>WHIRLPOOL_Init()</code>, <code>WHIRLPOOL_Update()</code>, <code>WHIRLPOOL_Final()</code>,
<code>WHIRLPOOL_BitUpdate()</code></p>
<p>See <a href="#deprecated_low_level_digest_functions">Deprecated low-level digest functions</a>.
The Whirlpool algorithm has been moved to the <a href="#legacy_algorithms">Legacy Provider</a>.</p>
</li>
<li>
<p>X509_certificate_type()</p>
<p>This was an undocumented function. Applications can use <em>X509_get0_pubkey(3)</em>
and <em>X509_get0_signature(3)</em> instead.</p>
</li>
<li>
<p>X509_http_nbio(), X509_CRL_http_nbio()</p>
<p>Use <em>X509_load_http(3)</em> and <em>X509_CRL_load_http(3)</em> instead.</p>
</li>
</ul>
<p>
</p>
<h3><a name="nid_handling_for_provided_keys_and_algorithms">NID handling for provided keys and algorithms</a></h3>
<p>The following functions for NID (numeric id) handling have changed semantics.</p>
<ul>
<li>
<p><code>EVP_PKEY_id()</code>, <code>EVP_PKEY_get_id()</code></p>
<p>This function was previously used to reliably return the NID of
an EVP_PKEY object, e.g., to look up the name of the algorithm of
such EVP_PKEY by calling <em>OBJ_nid2sn(3)</em>. With the introduction
of <em>provider(7)</em>s <code>EVP_PKEY_id()</code> or its new equivalent
<em>EVP_PKEY_get_id(3)</em> might now also return the value -1
(<strong>EVP_PKEY_KEYMGMT</strong>) indicating the use of a provider to
implement the EVP_PKEY object. Therefore, the use of
<em>EVP_PKEY_get0_type_name(3)</em> is recommended for retrieving
the name of the EVP_PKEY algorithm.</p>
</li>
</ul>
<p>
</p>
<h2><a name="using_the_fips_module_in_applications">Using the FIPS Module in applications</a></h2>
<p>See <em>fips_module(7)</em> and <em>OSSL_PROVIDER-FIPS(7)</em> for details.</p>
<p>
</p>
<h2><a name="openssl_command_line_application_changes">OpenSSL command line application changes</a></h2>
<p>
</p>
<h3><a name="new_applications">New applications</a></h3>
<p><em><strong>openssl kdf</strong></em> uses the new <em>EVP_KDF(3)</em> API.
<em><strong>openssl kdf</strong></em> uses the new <em>EVP_MAC(3)</em> API.</p>
<p>
</p>
<h3><a name="added_options">Added options</a></h3>
<p><strong>-provider_path</strong> and <strong>-provider</strong> are available to all apps and can be used
multiple times to load any providers, such as the 'legacy' provider or third
party providers. If used then the 'default' provider would also need to be
specified if required. The <strong>-provider_path</strong> must be specified before the
<strong>-provider</strong> option.</p>
<p>The <strong>list</strong> app has many new options. See <em>openssl-list(1)</em> for more
information.</p>
<p><strong>-crl_lastupdate</strong> and <strong>-crl_nextupdate</strong> used by <strong>openssl ca</strong> allows
explicit setting of fields in the generated CRL.</p>
<p>
</p>
<h3><a name="removed_options">Removed options</a></h3>
<p>Interactive mode is not longer available.</p>
<p>The <strong>-crypt</strong> option used by <strong>openssl passwd</strong>.
The <strong>-c</strong> option used by <strong>openssl x509</strong>, <strong>openssl dhparam</strong>,
<strong>openssl dsaparam</strong>, and <strong>openssl ecparam</strong>.</p>
<p>
</p>
<h3><a name="other_changes">Other Changes</a></h3>
<p>The output of Command line applications may have minor changes.
These are primarily changes in capitalisation and white space.  However, in some
cases, there are additional differences.
For example, the DH parameters output from <strong>openssl dhparam</strong> now lists 'P',
'Q', 'G' and 'pcounter' instead of 'prime', 'generator', 'subgroup order' and
'counter' respectively.</p>
<p>The <strong>openssl</strong> commands that read keys, certificates, and CRLs now
automatically detect the PEM or DER format of the input files so it is not
necessary to explicitly specify the input format anymore. However if the
input format option is used the specified format will be required.</p>
<p><strong>openssl speed</strong> no longer uses low-level API calls.
This implies some of the performance numbers might not be comparable with the
previous releases due to higher overhead. This applies particularly to
measuring performance on smaller data chunks.</p>
<p>b&lt;openssl dhparam&gt;, <strong>openssl dsa</strong>, <strong>openssl gendsa</strong>, <strong>openssl dsaparam</strong>,
<strong>openssl genrsa</strong> and <strong>openssl rsa</strong> have been modified to use PKEY APIs.
<strong>openssl genrsa</strong> and <strong>openssl rsa</strong> now write PKCS #8 keys by default.</p>
<p>
</p>
<h3><a name="default_settings">Default settings</a></h3>
<p>&quot;SHA256&quot; is now the default digest for TS query used by <strong>openssl ts</strong>.</p>
<p>
</p>
<h3><a name="deprecated_apps">Deprecated apps</a></h3>
<p><strong>openssl rsautl</strong> is deprecated, use <strong>openssl pkeyutl</strong> instead.
<strong>openssl dhparam</strong>, <strong>openssl dsa</strong>, <strong>openssl gendsa</strong>, <strong>openssl dsaparam</strong>,
<strong>openssl genrsa</strong>, <strong>openssl rsa</strong>, <strong>openssl genrsa</strong> and <strong>openssl rsa</strong> are
now in maintenance mode and no new features will be added to them.</p>
<p>
</p>
<h2><a name="tls_changes">TLS Changes</a></h2>
<ul>
<li>
<p>TLS 1.3 FFDHE key exchange support added</p>
<p>This uses DH safe prime named groups.</p>
</li>
<li>
<p>Support for fully &quot;pluggable&quot; TLSv1.3 groups.</p>
<p>This means that providers may supply their own group implementations (using
either the &quot;key exchange&quot; or the &quot;key encapsulation&quot; methods) which will
automatically be detected and used by libssl.</p>
</li>
<li>
<p>SSL and SSL_CTX options are now 64 bit instead of 32 bit.</p>
<p>The signatures of the functions to get and set options on SSL and
SSL_CTX objects changed from &quot;unsigned long&quot; to &quot;uint64_t&quot; type.</p>
<p>This may require source code changes. For example it is no longer possible
to use the <strong>SSL_OP_</strong> macro values in preprocessor <code>#if</code> conditions.
However it is still possible to test whether these macros are defined or not.</p>
<p>See <em>SSL_CTX_get_options(3)</em>, <em>SSL_CTX_set_options(3)</em>,
<em>SSL_get_options(3)</em> and <em>SSL_set_options(3)</em>.</p>
</li>
<li>
<p>SSL_set1_host() and SSL_add1_host() Changes</p>
<p>These functions now take IP literal addresses as well as actual hostnames.</p>
</li>
<li>
<p>Added SSL option SSL_OP_CLEANSE_PLAINTEXT</p>
<p>If the option is set, openssl cleanses (zeroizes) plaintext bytes from
internal buffers after delivering them to the application. Note,
the application is still responsible for cleansing other copies
(e.g.: data received by <em>SSL_read(3)</em>).</p>
</li>
<li>
<p>Client-initiated renegotiation is disabled by default.</p>
<p>To allow it, use the <strong>-client_renegotiation</strong> option,
the <strong>SSL_OP_ALLOW_CLIENT_RENEGOTIATION</strong> flag, or the <code>ClientRenegotiation</code>
config parameter as appropriate.</p>
</li>
<li>
<p>Secure renegotiation is now required by default for TLS connections</p>
<p>Support for <a href="http://www.ietf.org/rfc/rfc5746.txt" class="rfc">RFC 5746</a> secure renegotiation is now required by default for
SSL or TLS connections to succeed.  Applications that require the ability
to connect to legacy peers will need to explicitly set
SSL_OP_LEGACY_SERVER_CONNECT.  Accordingly, SSL_OP_LEGACY_SERVER_CONNECT
is no longer set as part of SSL_OP_ALL.</p>
</li>
<li>
<p>Combining the Configure options no-ec and no-dh no longer disables TLSv1.3</p>
<p>Typically if OpenSSL has no EC or DH algorithms then it cannot support
connections with TLSv1.3. However OpenSSL now supports &quot;pluggable&quot; groups
through providers. Therefore third party providers may supply group
implementations even where there are no built-in ones. Attempting to create
TLS connections in such a build without also disabling TLSv1.3 at run time or
using third party provider groups may result in handshake failures. TLSv1.3
can be disabled at compile time using the &quot;no-tls1_3&quot; Configure option.</p>
</li>
<li>
<p><code>SSL_CTX_set_ciphersuites()</code> and <code>SSL_set_ciphersuites()</code> changes.</p>
<p>The methods now ignore unknown ciphers.</p>
</li>
<li>
<p>Security callback change.</p>
<p>The security callback, which can be customised by application code, supports
the security operation SSL_SECOP_TMP_DH. This is defined to take an EVP_PKEY
in the &quot;other&quot; parameter. In most places this is what is passed. All these
places occur server side. However there was one client side call of this
security operation and it passed a DH object instead. This is incorrect
according to the definition of SSL_SECOP_TMP_DH, and is inconsistent with all
of the other locations. Therefore this client side call has been changed to
pass an EVP_PKEY instead.</p>
</li>
<li>
<p>New SSL option SSL_OP_IGNORE_UNEXPECTED_EOF</p>
<p>The SSL option SSL_OP_IGNORE_UNEXPECTED_EOF is introduced. If that option
is set, an unexpected EOF is ignored, it pretends a close notify was received
instead and so the returned error becomes SSL_ERROR_ZERO_RETURN.</p>
</li>
<li>
<p>The security strength of SHA1 and MD5 based signatures in TLS has been reduced.</p>
<p>This results in SSL 3, TLS 1.0, TLS 1.1 and DTLS 1.0 no longer
working at the default security level of 1 and instead requires security
level 0. The security level can be changed either using the cipher string
with <code>@SECLEVEL</code>, or calling <em>SSL_CTX_set_security_level(3)</em>. This also means
that where the signature algorithms extension is missing from a ClientHello
then the handshake will fail in TLS 1.2 at security level 1. This is because,
although this extension is optional, failing to provide one means that
OpenSSL will fallback to a default set of signature algorithms. This default
set requires the availability of SHA1.</p>
</li>
<li>
<p>X509 certificates signed using SHA1 are no longer allowed at security level 1 and above.</p>
<p>In TLS/SSL the default security level is 1. It can be set either using the cipher
string with <code>@SECLEVEL</code>, or calling <em>SSL_CTX_set_security_level(3)</em>. If the
leaf certificate is signed with SHA-1, a call to <em>SSL_CTX_use_certificate(3)</em>
will fail if the security level is not lowered first.
Outside TLS/SSL, the default security level is -1 (effectively 0). It can
be set using <em>X509_VERIFY_PARAM_set_auth_level(3)</em> or using the <strong>-auth_level</strong>
options of the commands.</p>
</li>
</ul>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><em>fips_module(7)</em></p>
<p>
</p>
<hr />
<h1><a name="history">HISTORY</a></h1>
<p>The migration guide was created for OpenSSL 3.0.</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright 2021-2023 The OpenSSL Project Authors. All Rights Reserved.</p>
<p>Licensed under the Apache License 2.0 (the &quot;License&quot;).  You may not use
this file except in compliance with the License.  You can obtain a copy
in the file LICENSE in the source distribution or at
<a href="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</a>.</p>

</body>

</html>
