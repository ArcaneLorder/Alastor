<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>OSSL_STORE_INFO</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<ul>

		<li><a href="#types">Types</a></li>
		<li><a href="#functions">Functions</a></li>
	</ul>

	<li><a href="#supported_objects">SUPPORTED OBJECTS</a></li>
	<li><a href="#return_values">RETURN VALUES</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#history">HISTORY</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<hr />
<h1><a name="name">NAME</a></h1>
<p>OSSL_STORE_INFO, OSSL_STORE_INFO_get_type, OSSL_STORE_INFO_get0_NAME,
OSSL_STORE_INFO_get0_NAME_description,
OSSL_STORE_INFO_get0_PARAMS, OSSL_STORE_INFO_get0_PUBKEY,
OSSL_STORE_INFO_get0_PKEY, OSSL_STORE_INFO_get0_CERT, OSSL_STORE_INFO_get0_CRL,
OSSL_STORE_INFO_get1_NAME, OSSL_STORE_INFO_get1_NAME_description,
OSSL_STORE_INFO_get1_PARAMS, OSSL_STORE_INFO_get1_PUBKEY,
OSSL_STORE_INFO_get1_PKEY, OSSL_STORE_INFO_get1_CERT, OSSL_STORE_INFO_get1_CRL,
OSSL_STORE_INFO_type_string, OSSL_STORE_INFO_free,
OSSL_STORE_INFO_new_NAME, OSSL_STORE_INFO_set0_NAME_description,
OSSL_STORE_INFO_new_PARAMS, OSSL_STORE_INFO_new_PUBKEY,
OSSL_STORE_INFO_new_PKEY, OSSL_STORE_INFO_new_CERT, OSSL_STORE_INFO_new_CRL,
OSSL_STORE_INFO_new, OSSL_STORE_INFO_get0_data
- Functions to manipulate OSSL_STORE_INFO objects</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
 <span class="comment">#include &lt;openssl/store.h&gt;</span>
</pre>
<pre>
 <span class="variable">typedef</span> <span class="variable">struct</span> <span class="variable">ossl_store_info_st</span> <span class="variable">OSSL_STORE_INFO</span><span class="operator">;</span>
</pre>
<pre>
 <span class="keyword">int</span> <span class="variable">OSSL_STORE_INFO_get_type</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">const</span> <span class="variable">char</span> <span class="variable">*OSSL_STORE_INFO_get0_NAME</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">char</span> <span class="variable">*OSSL_STORE_INFO_get1_NAME</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">const</span> <span class="variable">char</span> <span class="variable">*OSSL_STORE_INFO_get0_NAME_description</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span>
                                                   <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">char</span> <span class="variable">*OSSL_STORE_INFO_get1_NAME_description</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">EVP_PKEY</span> <span class="variable">*OSSL_STORE_INFO_get0_PARAMS</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">EVP_PKEY</span> <span class="variable">*OSSL_STORE_INFO_get1_PARAMS</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">EVP_PKEY</span> <span class="variable">*OSSL_STORE_INFO_get0_PUBKEY</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*info</span><span class="operator">);</span>
 <span class="variable">EVP_PKEY</span> <span class="variable">*OSSL_STORE_INFO_get1_PUBKEY</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*info</span><span class="operator">);</span>
 <span class="variable">EVP_PKEY</span> <span class="variable">*OSSL_STORE_INFO_get0_PKEY</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">EVP_PKEY</span> <span class="variable">*OSSL_STORE_INFO_get1_PKEY</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">X509</span> <span class="variable">*OSSL_STORE_INFO_get0_CERT</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">X509</span> <span class="variable">*OSSL_STORE_INFO_get1_CERT</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">X509_CRL</span> <span class="variable">*OSSL_STORE_INFO_get0_CRL</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
 <span class="variable">X509_CRL</span> <span class="variable">*OSSL_STORE_INFO_get1_CRL</span><span class="operator">(</span><span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
</pre>
<pre>
 <span class="variable">const</span> <span class="variable">char</span> <span class="variable">*OSSL_STORE_INFO_type_string</span><span class="operator">(</span><span class="keyword">int</span> <span class="variable">type</span><span class="operator">);</span>
</pre>
<pre>
 <span class="variable">void</span> <span class="variable">OSSL_STORE_INFO_free</span><span class="operator">(</span><span class="variable">OSSL_STORE_INFO</span> <span class="variable">*store_info</span><span class="operator">);</span>
</pre>
<pre>
 <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*OSSL_STORE_INFO_new_NAME</span><span class="operator">(</span><span class="variable">char</span> <span class="variable">*name</span><span class="operator">);</span>
 <span class="keyword">int</span> <span class="variable">OSSL_STORE_INFO_set0_NAME_description</span><span class="operator">(</span><span class="variable">OSSL_STORE_INFO</span> <span class="variable">*info</span><span class="operator">,</span> <span class="variable">char</span> <span class="variable">*desc</span><span class="operator">);</span>
 <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*OSSL_STORE_INFO_new_PARAMS</span><span class="operator">(</span><span class="variable">DSA</span> <span class="variable">*dsa_params</span><span class="operator">);</span>
 <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*OSSL_STORE_INFO_new_PUBKEY</span><span class="operator">(</span><span class="variable">EVP_PKEY</span> <span class="variable">*pubkey</span><span class="operator">);</span>
 <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*OSSL_STORE_INFO_new_PKEY</span><span class="operator">(</span><span class="variable">EVP_PKEY</span> <span class="variable">*pkey</span><span class="operator">);</span>
 <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*OSSL_STORE_INFO_new_CERT</span><span class="operator">(</span><span class="variable">X509</span> <span class="variable">*x509</span><span class="operator">);</span>
 <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*OSSL_STORE_INFO_new_CRL</span><span class="operator">(</span><span class="variable">X509_CRL</span> <span class="variable">*crl</span><span class="operator">);</span>
</pre>
<pre>
 <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*OSSL_STORE_INFO_new</span><span class="operator">(</span><span class="keyword">int</span> <span class="variable">type</span><span class="operator">,</span> <span class="variable">void</span> <span class="variable">*data</span><span class="operator">);</span>
 <span class="variable">void</span> <span class="variable">*OSSL_STORE_INFO_get0_data</span><span class="operator">(</span><span class="keyword">int</span> <span class="variable">type</span><span class="operator">,</span> <span class="variable">const</span> <span class="variable">OSSL_STORE_INFO</span> <span class="variable">*info</span><span class="operator">);</span>
</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>These functions are primarily useful for applications to retrieve
supported objects from <strong>OSSL_STORE_INFO</strong> objects and for scheme specific
loaders to create <strong>OSSL_STORE_INFO</strong> holders.</p>
<p>
</p>
<h2><a name="types">Types</a></h2>
<p><strong>OSSL_STORE_INFO</strong> is an opaque type that's just an intermediary holder for
the objects that have been retrieved by <code>OSSL_STORE_load()</code> and similar functions.
Supported OpenSSL type object can be extracted using one of
STORE_INFO_get0_&lt;TYPE&gt;() where &lt;TYPE&gt; can be NAME, PARAMS, PKEY, CERT, or CRL.
The life time of this extracted object is as long as the life time of
the <strong>OSSL_STORE_INFO</strong> it was extracted from, so care should be taken not
to free the latter too early.
As an alternative, STORE_INFO_get1_&lt;TYPE&gt;() extracts a duplicate (or the
same object with its reference count increased), which can be used
after the containing <strong>OSSL_STORE_INFO</strong> has been freed.
The object returned by STORE_INFO_get1_&lt;TYPE&gt;() must be freed separately
by the caller.
See <a href="#supported_objects">SUPPORTED OBJECTS</a> for more information on the types that are supported.</p>
<p>
</p>
<h2><a name="functions">Functions</a></h2>
<p><code>OSSL_STORE_INFO_get_type()</code> takes a <strong>OSSL_STORE_INFO</strong> and returns the STORE
type number for the object inside.</p>
<p><code>STORE_INFO_get_type_string()</code> takes a STORE type number and returns a
short string describing it.</p>
<p>OSSL_STORE_INFO_get0_NAME(), OSSL_STORE_INFO_get0_NAME_description(),
OSSL_STORE_INFO_get0_PARAMS(), OSSL_STORE_INFO_get0_PUBKEY(),
OSSL_STORE_INFO_get0_PKEY(), OSSL_STORE_INFO_get0_CERT(),
OSSL_STORE_INFO_get0_CRL()
all take a <strong>OSSL_STORE_INFO</strong> and return the object it holds if the
<strong>OSSL_STORE_INFO</strong> type (as returned by OSSL_STORE_INFO_get_type())
matches the function, otherwise NULL.</p>
<p>OSSL_STORE_INFO_get1_NAME(), OSSL_STORE_INFO_get1_NAME_description(),
OSSL_STORE_INFO_get1_PARAMS(), OSSL_STORE_INFO_get1_PUBKEY(),
OSSL_STORE_INFO_get1_PKEY(), OSSL_STORE_INFO_get1_CERT() and
OSSL_STORE_INFO_get1_CRL()
all take a <strong>OSSL_STORE_INFO</strong> and return a duplicate the object it
holds if the <strong>OSSL_STORE_INFO</strong> type (as returned by
OSSL_STORE_INFO_get_type()) matches the function, otherwise NULL.</p>
<p><code>OSSL_STORE_INFO_free()</code> frees a <strong>OSSL_STORE_INFO</strong> and its contained type.</p>
<p><code>OSSL_STORE_INFO_new_NAME()</code> , <code>OSSL_STORE_INFO_new_PARAMS()</code>,
, <code>OSSL_STORE_INFO_new_PUBKEY()</code>, <code>OSSL_STORE_INFO_new_PKEY()</code>,
<code>OSSL_STORE_INFO_new_CERT()</code> and <code>OSSL_STORE_INFO_new_CRL()</code>
create a <strong>OSSL_STORE_INFO</strong> object to hold the given input object.
On success the input object is consumed.</p>
<p>Additionally, for <strong>OSSL_STORE_INFO_NAME</strong> objects,
OSSL_STORE_INFO_set0_NAME_description() can be used to add an extra
description.
This description is meant to be human readable and should be used for
information printout.</p>
<p><code>OSSL_STORE_INFO_new()</code> creates a <strong>OSSL_STORE_INFO</strong> with an arbitrary <em>type</em>
number and <em>data</em> structure.  It's the responsibility of the caller to
define type numbers other than the ones defined by <em class="file">&lt;openssl/store.h</em> &gt;&gt;,
and to handle freeing the associated data structure on their own.
<em>Using type numbers that are defined by <em class="file">&lt;openssl/store.h</em> </em>&gt; may cause
undefined behaviours, including crashes&gt;.</p>
<p>OSSL_STORE_INFO_get0_data() returns the data pointer that was passed to
<code>OSSL_STORE_INFO_new()</code> if <em>type</em> matches the type number in <em>info</em>.</p>
<p><code>OSSL_STORE_INFO_new()</code> and OSSL_STORE_INFO_get0_data() may be useful for
applications that define their own STORE data, but must be used with care.</p>
<p>
</p>
<hr />
<h1><a name="supported_objects">SUPPORTED OBJECTS</a></h1>
<p>Currently supported object types are:</p>
<dl>
<dt><strong><a name="ossl_store_info_name" class="item">OSSL_STORE_INFO_NAME</a></strong></dt>

<dd>
<p>A name is exactly that, a name.
It's like a name in a directory, but formatted as a complete URI.
For example, the path in URI <code>file:/foo/bar/</code> could include a file
named <code>cookie.pem</code>, and in that case, the returned <strong>OSSL_STORE_INFO_NAME</strong>
object would have the URI <code>file:/foo/bar/cookie.pem</code>, which can be
used by the application to get the objects in that file.
This can be applied to all schemes that can somehow support a listing
of object URIs.</p>
<p>For <code>file:</code> URIs that are used without the explicit scheme, the
returned name will be the path of each object, so if <code>/foo/bar</code> was
given and that path has the file <code>cookie.pem</code>, the name
<code>/foo/bar/cookie.pem</code> will be returned.</p>
<p>The returned URI is considered canonical and must be unique and permanent
for the storage where the object (or collection of objects) resides.
Each loader is responsible for ensuring that it only returns canonical
URIs.
However, it's possible that certain schemes allow an object (or collection
thereof) to be reached with alternative URIs; just because one URI is
canonical doesn't mean that other variants can't be used.</p>
<p>At the discretion of the loader that was used to get these names, an
extra description may be attached as well.</p>
</dd>
<dt><strong><a name="ossl_store_info_params" class="item">OSSL_STORE_INFO_PARAMS</a></strong></dt>

<dd>
<p>Key parameters.</p>
</dd>
<dt><strong><a name="ossl_store_info_pkey" class="item">OSSL_STORE_INFO_PKEY</a></strong></dt>

<dd>
<p>A keypair or just a private key (possibly with key parameters).</p>
</dd>
<dt><strong><a name="ossl_store_info_pubkey" class="item">OSSL_STORE_INFO_PUBKEY</a></strong></dt>

<dd>
<p>A public key (possibly with key parameters).</p>
</dd>
<dt><strong><a name="ossl_store_info_cert" class="item">OSSL_STORE_INFO_CERT</a></strong></dt>

<dd>
<p>An X.509 certificate.</p>
</dd>
<dt><strong><a name="ossl_store_info_crl" class="item">OSSL_STORE_INFO_CRL</a></strong></dt>

<dd>
<p>A X.509 certificate revocation list.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="return_values">RETURN VALUES</a></h1>
<p><code>OSSL_STORE_INFO_get_type()</code> returns the STORE type number of the given
<strong>OSSL_STORE_INFO</strong>.
There is no error value.</p>
<p>OSSL_STORE_INFO_get0_NAME(), OSSL_STORE_INFO_get0_NAME_description(),
OSSL_STORE_INFO_get0_PARAMS(), OSSL_STORE_INFO_get0_PKEY(),
OSSL_STORE_INFO_get0_CERT() and OSSL_STORE_INFO_get0_CRL() all return
a pointer to the OpenSSL object on success, NULL otherwise.</p>
<p>OSSL_STORE_INFO_get1_NAME(), OSSL_STORE_INFO_get1_NAME_description(),
OSSL_STORE_INFO_get1_PARAMS(), OSSL_STORE_INFO_get1_PKEY(),
OSSL_STORE_INFO_get1_CERT() and OSSL_STORE_INFO_get1_CRL() all return
a pointer to a duplicate of the OpenSSL object on success, NULL otherwise.</p>
<p><code>OSSL_STORE_INFO_type_string()</code> returns a string on success, or NULL on
failure.</p>
<p><code>OSSL_STORE_INFO_new_NAME()</code>, <code>OSSL_STORE_INFO_new_PARAMS()</code>,
<code>OSSL_STORE_INFO_new_PKEY()</code>, <code>OSSL_STORE_INFO_new_CERT()</code> and
<code>OSSL_STORE_INFO_new_CRL()</code> return a <strong>OSSL_STORE_INFO</strong>
pointer on success, or NULL on failure.</p>
<p>OSSL_STORE_INFO_set0_NAME_description() returns 1 on success, or 0 on
failure.</p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><em>ossl_store(7)</em>, <em>OSSL_STORE_open(3)</em>, <em>OSSL_STORE_register_loader(3)</em></p>
<p>
</p>
<hr />
<h1><a name="history">HISTORY</a></h1>
<p>The OSSL_STORE API was added in OpenSSL 1.1.1.</p>
<p>The OSSL_STORE_INFO_PUBKEY object type was added in OpenSSL 3.0.</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright 2016-2021 The OpenSSL Project Authors. All Rights Reserved.</p>
<p>Licensed under the Apache License 2.0 (the &quot;License&quot;).  You may not use
this file except in compliance with the License.  You can obtain a copy
in the file LICENSE in the source distribution or at
<a href="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</a>.</p>

</body>

</html>
